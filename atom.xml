<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>昌久个人博客</title>
  
  <subtitle>我是子标题不知道说啥</subtitle>
  <link href="https://luchangjiu.github.io/atom.xml" rel="self"/>
  
  <link href="https://luchangjiu.github.io/"/>
  <updated>2022-04-13T15:22:53.000Z</updated>
  <id>https://luchangjiu.github.io/</id>
  
  <author>
    <name>昌久</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="https://luchangjiu.github.io/2023/03/05/hexo/hello-world/"/>
    <id>https://luchangjiu.github.io/2023/03/05/hexo/hello-world/</id>
    <published>2023-03-05T13:32:49.919Z</published>
    <updated>2022-04-13T15:22:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>linux 使用ssh免密向window 传输数据</title>
    <link href="https://luchangjiu.github.io/2022/04/27/linux/linux-tranf-to-win/"/>
    <id>https://luchangjiu.github.io/2022/04/27/linux/linux-tranf-to-win/</id>
    <published>2022-04-27T13:56:01.000Z</published>
    <updated>2022-04-27T15:44:35.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>最近遇到 数据库云服务器是linux 系统，但是本地备份的物理机系统是win7 的，<br>这时需要从linux 服务器上拷贝数据并且需要免密传输（方便写shell 脚本）.</p><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><p>CenterOS 7 自带ssh 服务<br>Windows7 默认你已经安装了OpenSSH 服务(没安装可以先去安装了)</p><h2 id="使用ssh-生成密钥"><a href="#使用ssh-生成密钥" class="headerlink" title="使用ssh 生成密钥"></a>使用ssh 生成密钥</h2><p>在linux 服务器端生成rsa密钥</p><p>输入以下命令后，出现的提示可以根据提示录入地址或者配置密码，我这里直接都是按回车，使用默认的就好</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="将生成的密钥复制到windows-系统上"><a href="#将生成的密钥复制到windows-系统上" class="headerlink" title="将生成的密钥复制到windows 系统上"></a>将生成的密钥复制到windows 系统上</h2><p>在linux 系统上使用scp 命令复制过去<br>我这里使用的是root 帐号生成的rsa密钥默认在 &#x2F;root&#x2F;.ssh 目录下</p><p>如果你不是使用root 帐号，那么默认生成的rsa 密钥在 &#x2F;home&#x2F;你的帐号&#x2F;.ssh 目录下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这里传输到windows d 盘目录</span></span><br><span class="line">scp /root/.ssh/id_rsa.pub  Administrator@你的windowip地址:/d:/</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="修改windows-openssh-配置文件"><a href="#修改windows-openssh-配置文件" class="headerlink" title="修改windows openssh 配置文件"></a>修改windows openssh 配置文件</h2><p>进入 c:&#x2F;&#x2F;ProgramData&#x2F;&#x2F;ssh 打开文件 sshd_config</p><p>找到节点<br>PubkeyAuthentication yes   将这行的注释取消<br>然后注释掉下面两行<br>Match Group admiistrators<br>    AuthorizedKeysFile <strong>PROGRADDATA</strong>&#x2F;ssh&#x2F;administrators_authorized_keys</p><h2 id="配置windows-openssh-的密钥文件"><a href="#配置windows-openssh-的密钥文件" class="headerlink" title="配置windows openssh 的密钥文件"></a>配置windows openssh 的密钥文件</h2><p>进入C:&#x2F;&#x2F;用户&#x2F;&#x2F;你当前的用户名&#x2F;&#x2F;.ssh </p><p>然后将刚刚linux 上传到D盘的id_rsa.pub 文件复制到 .ssh 目录上并改名为 authorized_keys</p><p>注意： 如果没有.ssh 文件可以使用cmd 命令行 mkdir .ssh 创建</p><p>配置后记得重启openssh 相关的服务.</p><h2 id="测试是否成功"><a href="#测试是否成功" class="headerlink" title="测试是否成功"></a>测试是否成功</h2><p>切换回我们的linux<br>输入以下命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ssh Administrator@你的windows IP 地址</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果不需要密码能直接链接那么就表示配置成功了，可以编写shell 脚本ssh 命令了</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;最近遇到 数据库云服务器是linux 系统，但是本地备份的物理机系统是win7 的，&lt;br&gt;这时需要从linux 服务器上拷贝数据并且需要免</summary>
      
    
    
    
    
    <category term="linux" scheme="https://luchangjiu.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>oracle 在linux 系统的备份脚本</title>
    <link href="https://luchangjiu.github.io/2022/04/27/oracle/oracle-linux-backup-script/"/>
    <id>https://luchangjiu.github.io/2022/04/27/oracle/oracle-linux-backup-script/</id>
    <published>2022-04-27T04:13:23.000Z</published>
    <updated>2022-05-04T08:47:54.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>centos7 上oracle 数据库的备份脚本</p><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><p>centos7 上安装了oracle 数据库且安装的用户是oracle<br>且oracle 用户的环境可以使用oracle 相关的命令，如sqlplus 等命令.</p><h2 id="创建oracle-的备份目录"><a href="#创建oracle-的备份目录" class="headerlink" title="创建oracle 的备份目录"></a>创建oracle 的备份目录</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">-- 查询已经存在的directory</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>  dba_directories;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建一个名为 oracle_dbbk 的目录 并指向 /data/oracle_dbbk 路径</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace directory oracle_dbbk  <span class="keyword">as</span> <span class="string">&#x27;/data/oracle_dbbk&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用数据库管理员帐号授权可操作directory 的帐号权限</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> read, write <span class="keyword">on</span> directory oracle_dbbk <span class="keyword">to</span> 你自己的帐号;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除目录</span></span><br><span class="line"><span class="keyword">drop</span> directory oracle_dbbk;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="shell脚本代码"><a href="#shell脚本代码" class="headerlink" title="shell脚本代码"></a>shell脚本代码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加载当前 oracle 帐号的环境变量</span></span><br><span class="line">source /home/oracle/.bash_profile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取当前时间</span></span><br><span class="line"></span><br><span class="line">CURDATE=$(date &#x27;+%Y%m%d%H%M%S&#x27;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份目录</span></span><br><span class="line">backup_directory=/data/oracle_dbbk</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份文件名的前缀</span></span><br><span class="line">data_file_prefix=orcl_bak_</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">拼接备份文件dmp 的文件名 加上当前的时间</span></span><br><span class="line">BACKUP_FILE_NAME=$data_file_prefix$CURDATE.dmp</span><br><span class="line">LOG_BACKUP_FILE_NAME=$data_file_prefix$CURDATE.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">拼接日志文件<span class="built_in">log</span> 的文件名 加上当前的时间</span></span><br><span class="line">BACKUP_FILE=$backup_directory/$BACKUP_FILE_NAME</span><br><span class="line">LOG_BACKUP_FILE=$backup_directory/$LOG_BACKUP_FILE_NAME</span><br><span class="line"></span><br><span class="line">echo $BACKUP_FILE</span><br><span class="line">echo $LOG_BACKUP_FILE</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">一个删除5 天前的的备份数据文件</span></span><br><span class="line">delete_prev_data_file() </span><br><span class="line">&#123;</span><br><span class="line">    premonth=$(date -d&quot;5 days ago&quot; &#x27;+%Y%m%d&#x27;)</span><br><span class="line">    rm -rf $backup_directory/$data_file_prefix$premonth* || true</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入到备份目录</span></span><br><span class="line">cd $backup_directory </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置oracle 的导出命令</span></span><br><span class="line">bak_exec=&quot;expdp oracle数据库帐号/密码 directory=oracle_dbbk dumpfile=$BACKUP_FILE_NAME logfile=$LOG_BACKUP_FILE_NAME schemas=数据库帐号名 job_name=exp_user_schema&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">执行oracle expdp 导出命令</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">bak_exec</span></span><br><span class="line"></span><br><span class="line">echo &#x27;delete pre feils  ..... &#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">调用删除前 5 天的函数</span></span><br><span class="line"></span><br><span class="line">delete_prev_data_file</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下面是可选项 将已经生成的备份文件通过ssh 命令  发送到存储数据的服务器</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">前提是 两台机器需要通过ssh 密钥验证才能免密码传输</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sendToDiskServer=<span class="string">&quot;scp <span class="variable">$BACKUP_FILE</span> xxk@192.168.1.121:/e:/oracle_bak/files &quot;</span>;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$sendToDiskServer</span></span></span><br><span class="line"></span><br><span class="line">exit 0 </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="设置定时任务"><a href="#设置定时任务" class="headerlink" title="设置定时任务"></a>设置定时任务</h2><p>这里设置的是凌晨1 点同步的任务</p><p>使用 <code> crontab -e </code> 命令，然后录入<br><code> 00 01 * * *  /data/oracle_bakup.sh </code></p><p>录入完成后输入 :wq 退出编辑即可</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;centos7 上oracle 数据库的备份脚本&lt;/p&gt;
&lt;h2 id=&quot;依赖&quot;&gt;&lt;a href=&quot;#依赖&quot; class=&quot;headerli</summary>
      
    
    
    
    
    <category term="oracle" scheme="https://luchangjiu.github.io/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>Windows 安装OpenSSH 实现ssh传输</title>
    <link href="https://luchangjiu.github.io/2022/04/26/windows/win-openssh-install/"/>
    <id>https://luchangjiu.github.io/2022/04/26/windows/win-openssh-install/</id>
    <published>2022-04-26T05:28:03.000Z</published>
    <updated>2022-04-27T14:37:28.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>windows 使用 ssh 安全协议</p><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><p>windows7以上<br>openssh7 以上</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>打开github 点击 <a href="https://github.com/PowerShell/Win32-OpenSSH/releases">Win32-OpenSSH</a><br>选择相应的版本，32 位的操作系统就选32的，64就选64 的安装</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>懒得打直接去wiki 上看吧 <a href="https://github.com/PowerShell/Win32-OpenSSH/wiki/Install-Win32-OpenSSH">openssh install page </a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;windows 使用 ssh 安全协议&lt;/p&gt;
&lt;h2 id=&quot;依赖&quot;&gt;&lt;a href=&quot;#依赖&quot; class=&quot;headerlink&quot; t</summary>
      
    
    
    
    
    <category term="windows" scheme="https://luchangjiu.github.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>springboot i18n 支持国际化</title>
    <link href="https://luchangjiu.github.io/2022/04/25/java/spring-boot-2.6.6-i18n/"/>
    <id>https://luchangjiu.github.io/2022/04/25/java/spring-boot-2.6.6-i18n/</id>
    <published>2022-04-25T14:23:00.000Z</published>
    <updated>2022-04-26T13:48:44.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>springboot 使用i18n 国际化语言，可以互相切换</p><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><p>java1.8<br>springboot 2.6.6<br>maven 4.0</p><h2 id="maven-配置"><a href="#maven-配置" class="headerlink" title="maven 配置"></a>maven 配置</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 这里我使用 thymeleaf 模板引擎 方便 页面展示 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 在页面引入jquery  使用i18n 国际化api --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>webjars-locator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars.bower<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery-i18n-properties<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h2><p>在resources 目录下新增文件夹 static&#x2F;i18n</p><p>在i18n文件夹上新增的properties 文件</p><p><strong>默认文件</strong><br>这个是必须的 可以不填写内容<br>messages.properties<br><strong>中文</strong></p><p>messages_zh_CN.properties</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">helloword=你好 世界</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>英文</strong><br>messages_en_US.properties</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">helloword=hello world</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>需要将编写的文件格式设置为utf-8 以防乱码</p><h2 id="配置yml"><a href="#配置yml" class="headerlink" title="配置yml"></a>配置yml</h2><p>这里仅展示主要的配置,其他配置节点就不写了</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">messages:</span></span><br><span class="line">    <span class="attr">encoding:</span> <span class="string">utf-8</span></span><br><span class="line">    <span class="attr">basename:</span> <span class="string">static/i18n/messages</span></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">    <span class="attr">prefix:</span> <span class="string">classpath:/templates/</span></span><br><span class="line">    <span class="attr">suffix:</span> <span class="string">.html</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">HTML5</span></span><br><span class="line">    <span class="attr">encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">    <span class="attr">cache:</span> <span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="java-代码使用"><a href="#java-代码使用" class="headerlink" title="java 代码使用"></a>java 代码使用</h2><h3 id="配置语言拦截器切换"><a href="#配置语言拦截器切换" class="headerlink" title="配置语言拦截器切换"></a>配置语言拦截器切换</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.web.servlet.WebMvcProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> AcceptHeaderLocaleResolver <span class="title function_">localeResolver</span><span class="params">(WebMvcProperties mvcProperties)</span> &#123;</span><br><span class="line"><span class="type">AcceptHeaderLocaleResolver</span> <span class="variable">localeResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AcceptHeaderLocaleResolver</span>() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Locale <span class="title function_">resolveLocale</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">                <span class="comment">// 配置 lang 切换语言时请求设置</span></span><br><span class="line"><span class="type">String</span> <span class="variable">locale</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;lang&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> locale != <span class="literal">null</span></span><br><span class="line">? org.springframework.util.StringUtils.parseLocaleString(locale)</span><br><span class="line">: <span class="built_in">super</span>.resolveLocale(request);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">localeResolver.setDefaultLocale(Locale.CHINA);</span><br><span class="line"><span class="keyword">return</span> localeResolver;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="java-中使用"><a href="#java-中使用" class="headerlink" title="java 中使用"></a>java 中使用</h3><p>配置工具类可以方便的使用<br>配置完成后可以使用  <code> LocalUtil.get("helloworld")</code> 获取到国际化文本内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.MessageSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.i18n.LocaleContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LocalUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MessageSource messageSource;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LocalUtil</span><span class="params">(MessageSource messageSource)</span>&#123;</span><br><span class="line">        LocalUtil.messageSource = messageSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> LocalUtil.messageSource.getMessage(key, <span class="literal">null</span>, LocaleContextHolder.getLocale());</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            <span class="keyword">return</span> key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="thymeleaf-页面中使用"><a href="#thymeleaf-页面中使用" class="headerlink" title="thymeleaf 页面中使用"></a>thymeleaf 页面中使用</h3><p>Controller 配置index 跳转 页面代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HomeController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/get-local&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLocal</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> LocalUtil.get(<span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>配置 index.html 页面代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">th:text</span>=<span class="string">&quot;#&#123;helloword&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">&quot;#&#123;helloword&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="页面jquery-使用i18n"><a href="#页面jquery-使用i18n" class="headerlink" title="页面jquery 使用i18n"></a>页面jquery 使用i18n</h3><p>配置index.html 页面代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">th:text</span>=<span class="string">&quot;#&#123;helloworld&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入jquery i18n 相关js --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/webjars/jquery/jquery.min.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/webjars/jquery-i18n-properties/jquery.i18n.properties.min.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">th:inline</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 引入基础路径</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> <span class="variable constant_">ROOT</span> = [[$&#123;#servletContext.<span class="property">contextPath</span>&#125;]] ;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 获取语言和国家</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> <span class="variable constant_">LANG_COUNTRY</span> = [[$&#123;#locale.<span class="property">language</span>+<span class="string">&#x27;_&#x27;</span>+#locale.<span class="property">country</span>&#125;]] ;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 初始化i18n 插件</span></span></span><br><span class="line"><span class="language-javascript">        $.i18n.<span class="title function_">properties</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">path</span>: <span class="variable constant_">ROOT</span> + <span class="string">&#x27;/i18n/&#x27;</span>,  <span class="comment">//基础访问路径</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;messages&#x27;</span>, <span class="comment">// i18n 文件开头</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">language</span>: <span class="variable constant_">LANG_COUNTRY</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">mode</span>: <span class="string">&#x27;map&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 初始化 获取i18n 获取的函数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">getI18N</span>(<span class="params">key</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">try</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> $.i18n.<span class="title function_">prop</span>(key);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">catch</span>(e) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> key;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//输出i18n 文本</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getI18N</span>(<span class="string">&#x27;helloworld&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">&quot;#&#123;helloworld&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="启动并测试"><a href="#启动并测试" class="headerlink" title="启动并测试"></a>启动并测试</h3><p>启动后 录入地址</p><p>java 代码获取测试<br>访问中文<br><a href="http://localhost:8080/get-local?lang=zh_CN">http://localhost:8080/get-local?lang=zh_CN</a><br>访问英文<br><a href="http://localhost:8080/get-local?lang=en_US">http://localhost:8080/get-local?lang=en_US</a></p><p>网页获取测试 </p><p>访问中文页面<br><a href="http://localhost:8080/?lang=zh_CN">http://localhost:8080/?lang=zh_CN</a><br>访问英文页面<br><a href="http://localhost:8080/?lang=en_US">http://localhost:8080/?lang=en_US</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;springboot 使用i18n 国际化语言，可以互相切换&lt;/p&gt;
&lt;h2 id=&quot;依赖&quot;&gt;&lt;a href=&quot;#依赖&quot; class=&quot;he</summary>
      
    
    
    
    
    <category term="java" scheme="https://luchangjiu.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu 安装rar 解压工具</title>
    <link href="https://luchangjiu.github.io/2022/04/17/linux/ubuntu-rar-install/"/>
    <id>https://luchangjiu.github.io/2022/04/17/linux/ubuntu-rar-install/</id>
    <published>2022-04-17T12:27:03.000Z</published>
    <updated>2022-04-17T12:36:21.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><p>ubuntu 20.04</p><h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装压缩工具</span></span><br><span class="line">sudo apt-get install rar</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载</span></span><br><span class="line">sudo apt-get remove rar</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装解压工具</span></span><br><span class="line">sudo apt-get install unrar</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载</span></span><br><span class="line">sudo apt-get reomve unrar</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">压缩文件</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">示例 rar a 压缩文件名  压缩文件夹名称</span></span><br><span class="line">rar a myrar.rar files</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解压文件</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">示例 unrar e 解压文件  解压到文件夹名称</span></span><br><span class="line">unrar e myrar.rar myrar</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者使用rar x 压缩文件 也可以解压</span></span><br><span class="line">rar x myrar.rar</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerlink&quot; title=&quot;环境&quot;&gt;&lt;/a&gt;环境&lt;/h1&gt;&lt;p&gt;ubuntu 20.04&lt;/p&gt;
&lt;h2 id=&quot;安装步骤&quot;&gt;&lt;a href=&quot;#安装步骤&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    
    <category term="linux" scheme="https://luchangjiu.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>C# Winform 解决程序多开</title>
    <link href="https://luchangjiu.github.io/2022/04/17/donet/winform-app-mutex/"/>
    <id>https://luchangjiu.github.io/2022/04/17/donet/winform-app-mutex/</id>
    <published>2022-04-17T07:04:02.000Z</published>
    <updated>2022-04-17T08:23:51.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>在开发winform 程序是，有时要求程序只能打开一个，这时可以使用Mutex 类来控制<br>具体详细文档请看微软 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.mutex.-ctor?view=net-6.0#system-threading-mutex-ctor(system-boolean-system-string-system-boolean@)">Mutex</a></p><h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[<span class="meta">STAThread</span>]</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> createNew = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> mutex = <span class="keyword">new</span> Mutex(<span class="literal">true</span>, <span class="string">&quot;program.exe&quot;</span>, <span class="keyword">out</span> createNew);</span><br><span class="line">    <span class="keyword">if</span>(!createNew) </span><br><span class="line">    &#123;</span><br><span class="line">        MessageBox.Show(<span class="string">&quot;该程序已在运行！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Application.Run(<span class="keyword">new</span> Form1());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;在开发winform 程序是，有时要求程序只能打开一个，这时可以使用Mutex 类来控制&lt;br&gt;具体详细文档请看微软 &lt;a href=&quot;ht</summary>
      
    
    
    
    
    <category term="C#" scheme="https://luchangjiu.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>扩展easyui datagrid 编辑网格插件</title>
    <link href="https://luchangjiu.github.io/2022/04/09/easyui/easyui-datagrid-extension-1/"/>
    <id>https://luchangjiu.github.io/2022/04/09/easyui/easyui-datagrid-extension-1/</id>
    <published>2022-04-09T08:18:23.000Z</published>
    <updated>2022-04-25T16:30:33.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>扩展datagrid 的编辑，实现使用方向来进行表格编辑操作，减少编辑一行就动一下鼠标的麻烦。</p><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><p>从easyui 上扩展的，依赖jquery,easyui </p><h2 id="GridEdit-扩展内容"><a href="#GridEdit-扩展内容" class="headerlink" title="GridEdit 扩展内容"></a>GridEdit 扩展内容</h2><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td>hasDeleteColumn</td><td>boolean</td><td>是否在最后一列生成删除操作列</td><td>true</td></tr><tr><td>deleteColumnWidth</td><td>int</td><td>生成删除操作列的宽度</td><td>50</td></tr><tr><td>primarykey</td><td>string</td><td>设置列主键字段</td><td>id</td></tr></tbody></table><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><table><thead><tr><th>名称</th><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>onDeleteRow</td><td>value,row,index</td><td>点击删除按钮时触发，如果是没有主键值则默认删除但是也会触发。<br/> value: 当前行id<br/> row: 当前行json对象<br/> index:当前行索引</td></tr><tr><td>onInitNewRow</td><td>index</td><td>新增一行时触发<br/>index: 新增行索引<br/> 返回值： 返回值对象将会用作当前行的对象值，不返回则使用默认的新增空值对象</td></tr></tbody></table><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><table><thead><tr><th>名称</th><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>endEdit</td><td>index</td><td>index为正在编辑的行， 不传参数则默认结束正在编辑的行</td></tr><tr><td>clear</td><td>none</td><td>清空当前表格所有的数据并保留编辑行</td></tr></tbody></table><h2 id="插件代码"><a href="#插件代码" class="headerlink" title="插件代码"></a>插件代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    扩展datagrid 让其可以通过方向键来进行数据的编辑</span></span><br><span class="line"><span class="comment">    建议 独立新创建一个文件来保存此代码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $.fn.<span class="property">gridedit</span> = <span class="keyword">function</span> (<span class="params">options,param</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> options === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>($.fn.<span class="property">gridedit</span>.<span class="property">methods</span>[options]) &#123;</span><br><span class="line">                <span class="keyword">return</span> $.fn.<span class="property">gridedit</span>.<span class="property">methods</span>[options](<span class="variable language_">this</span>, param);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> $tb = $(<span class="variable language_">this</span>);</span><br><span class="line">                <span class="keyword">var</span> args = <span class="variable language_">arguments</span>;</span><br><span class="line">                <span class="keyword">return</span> $tb.<span class="property">datagrid</span>.<span class="title function_">apply</span>($tb, args);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        options = options || &#123;&#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> state = $.<span class="title function_">data</span>(<span class="variable language_">this</span>, <span class="string">&#x27;gridedit&#x27;</span>);</span><br><span class="line">            <span class="keyword">var</span> opts;</span><br><span class="line">            <span class="keyword">if</span> (state) &#123;</span><br><span class="line">                opts = $.<span class="title function_">extend</span>(state.<span class="property">options</span>, options);</span><br><span class="line">                state.<span class="property">options</span> = opts;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                options = $.<span class="title function_">extend</span>(&#123;&#125;, $.fn.<span class="property">gridedit</span>.<span class="property">defaults</span>, options);</span><br><span class="line">                <span class="comment">// 扩展默认的属性</span></span><br><span class="line">                <span class="keyword">var</span> defaults = &#123;</span><br><span class="line">                    <span class="attr">hasDeleteColumn</span>: <span class="literal">true</span>, <span class="comment">//是否有删除列</span></span><br><span class="line">                    <span class="attr">deleteColumnWidth</span>: <span class="number">50</span>, <span class="comment">//删除列宽</span></span><br><span class="line">                    <span class="attr">onDeleteRow</span>: <span class="keyword">function</span> (<span class="params">value, row, index</span>) &#123;</span><br><span class="line">                    &#125;, <span class="comment">//执行远程删除事件</span></span><br><span class="line">                    <span class="attr">singleSelect</span>: <span class="literal">true</span>, <span class="comment">//默认单选</span></span><br><span class="line">                    <span class="attr">primarykey</span>: <span class="string">&#x27;id&#x27;</span>, <span class="comment">//默认列的id属性  用于生成删除按钮时使用</span></span><br><span class="line">                    <span class="attr">onInitNewRow</span>: <span class="keyword">function</span> (<span class="params">index</span>) &#123;</span><br><span class="line">                    &#125;, <span class="comment">// 新增行时触发 ， 参数是索引，需要返回一个新增的行对象，用于操作</span></span><br><span class="line">                    <span class="attr">onLoadSuccess</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">                options = $.<span class="title function_">extend</span>(defaults, options || &#123;&#125;);</span><br><span class="line"></span><br><span class="line">                opts = options;</span><br><span class="line">                $.<span class="title function_">data</span>(<span class="variable language_">this</span>, <span class="string">&#x27;gridedit&#x27;</span>, &#123;<span class="attr">options</span>: opts&#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> _grid = &#123;</span><br><span class="line">                <span class="comment">//表格的JQuery 对象</span></span><br><span class="line">                <span class="attr">grid</span>: <span class="literal">null</span>,</span><br><span class="line">                <span class="comment">//当前操作索引</span></span><br><span class="line">                <span class="attr">editIndex</span>: <span class="literal">undefined</span>,</span><br><span class="line">                <span class="comment">//结束正在编辑的行</span></span><br><span class="line">                <span class="attr">endEditing</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">editIndex</span> == <span class="literal">undefined</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;validateRow&#x27;</span>, <span class="variable language_">this</span>.<span class="property">editIndex</span>)) &#123;</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;endEdit&#x27;</span>, <span class="variable language_">this</span>.<span class="property">editIndex</span>);</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="title function_">renderDeleteButtom</span>();</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="property">editIndex</span> = <span class="literal">undefined</span>;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="comment">//渲染最后一列删除按钮</span></span><br><span class="line">                <span class="attr">renderDeleteButtom</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    $(<span class="string">&#x27;.col-delete-btn&#x27;</span>).<span class="title function_">linkbutton</span>(&#123;<span class="attr">text</span>: <span class="string">&#x27;删除&#x27;</span>, <span class="attr">plain</span>: <span class="literal">true</span>, <span class="attr">iconCls</span>: <span class="string">&#x27;icon-remove&#x27;</span>&#125;);</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="comment">//初始化第一可编辑行</span></span><br><span class="line">                <span class="attr">initialBeginEditorRow</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> rows = <span class="variable language_">this</span>.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;getRows&#x27;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (rows.<span class="property">length</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;appendRow&#x27;</span>, options.<span class="property">onInitNewRow</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>.<span class="property">grid</span>, <span class="number">0</span>) || &#123;&#125;);</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;selectRow&#x27;</span>, <span class="number">0</span>).<span class="title function_">datagrid</span>(<span class="string">&#x27;beginEdit&#x27;</span>, <span class="number">0</span>);</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;beginEdit&#x27;</span>, <span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">var</span> editors = <span class="variable language_">this</span>.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, <span class="number">0</span>);</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="title function_">bindEditorsEvent</span>(editors);</span><br><span class="line">                        <span class="keyword">if</span> (editors.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                            $(editors[<span class="number">0</span>].<span class="property">target</span>).<span class="title function_">focus</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;gridedit 仅支持可编辑的列，需要在列配置editor&#x27;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="property">editIndex</span> = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="comment">// 获取当前焦点控件列索引</span></span><br><span class="line">                <span class="attr">getFocusColIndex</span>: <span class="keyword">function</span> (<span class="params">input</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> $(input).<span class="title function_">parents</span>(<span class="string">&#x27;td[field]&#x27;</span>).<span class="title function_">index</span>();</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="comment">//这里扩展 onRowClick 事件，在保留原有事件的同时 ，增加功能</span></span><br><span class="line">                <span class="attr">appendClickRowEvent</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> gridAction = <span class="variable language_">this</span>;</span><br><span class="line">                    <span class="keyword">var</span> $tb = <span class="variable language_">this</span>.<span class="property">grid</span>;</span><br><span class="line">                    <span class="keyword">var</span> clickRowBeginEditFunc = <span class="keyword">function</span> (<span class="params">index, row</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (gridAction.<span class="property">editIndex</span> != index) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (gridAction.<span class="title function_">endEditing</span>()) &#123;</span><br><span class="line">                                $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;selectRow&#x27;</span>, index).<span class="title function_">datagrid</span>(<span class="string">&#x27;beginEdit&#x27;</span>, index);</span><br><span class="line">                                <span class="keyword">var</span> editors = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, index);</span><br><span class="line">                                gridAction.<span class="title function_">bindEditorsEvent</span>(editors);</span><br><span class="line">                                gridAction.<span class="title function_">editorFocus</span>(editors[<span class="number">0</span>]);</span><br><span class="line">                                gridAction.<span class="property">editIndex</span> = index;</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;selectRow&#x27;</span>, gridAction.<span class="property">editIndex</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (options.<span class="property">onClickRow</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> oldClickRow = options.<span class="property">onClickRow</span>;</span><br><span class="line">                        options.<span class="property">onClickRow</span> = <span class="keyword">function</span> (<span class="params">index, row</span>) &#123;</span><br><span class="line">                            oldClickRow.<span class="title function_">call</span>(<span class="variable language_">this</span>, index, row);</span><br><span class="line">                            clickRowBeginEditFunc.<span class="title function_">call</span>(<span class="variable language_">this</span>, index, row);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        options.<span class="property">onClickRow</span> = <span class="keyword">function</span> (<span class="params">index, row</span>) &#123;</span><br><span class="line">                            clickRowBeginEditFunc.<span class="title function_">call</span>(<span class="variable language_">this</span>, index, row);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">appendLoadSuccessEvent</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> gridAction = <span class="variable language_">this</span>;</span><br><span class="line">                    <span class="keyword">var</span> $tb = <span class="variable language_">this</span>.<span class="property">grid</span>;</span><br><span class="line">                    <span class="keyword">if</span> (options.<span class="property">onLoadSuccess</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> oldLoadSucc = options.<span class="property">onLoadSuccess</span>;</span><br><span class="line">                        options.<span class="property">onLoadSuccess</span> = <span class="keyword">function</span> (<span class="params">index, row</span>) &#123;</span><br><span class="line">                            gridAction.<span class="title function_">renderDeleteButtom</span>();</span><br><span class="line">                            gridAction.<span class="property">editIndex</span> = <span class="literal">undefined</span>;</span><br><span class="line">                            oldLoadSucc.<span class="title function_">call</span>(<span class="variable language_">this</span>, index, row);</span><br><span class="line">                        &#125;;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        options.<span class="property">onLoadSuccess</span> = <span class="keyword">function</span> (<span class="params">index, row</span>) &#123;</span><br><span class="line">                            gridAction.<span class="title function_">renderDeleteButtom</span>();</span><br><span class="line">                            gridAction.<span class="property">editIndex</span> = <span class="literal">undefined</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">deleteRow</span>: <span class="keyword">function</span> (<span class="params">row, rowIndex</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> gridAction = <span class="variable language_">this</span>;</span><br><span class="line">                    <span class="keyword">if</span> (row &amp;&amp; row.<span class="title function_">hasOwnProperty</span>(options.<span class="property">primarykey</span>)) &#123;</span><br><span class="line">                        <span class="title class_">Msg</span>.<span class="title function_">confirm</span>(<span class="string">&#x27;是否永久删除该行？ &#x27;</span>, <span class="keyword">function</span> (<span class="params">isOk</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (isOk) &#123;</span><br><span class="line">                                options.<span class="property">onDeleteRow</span>.<span class="title function_">call</span>(gridAction.<span class="property">grid</span>, row[options.<span class="property">primarykey</span>], row, rowIndex);</span><br><span class="line">                                gridAction.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;deleteRow&#x27;</span>, rowIndex);</span><br><span class="line">                                gridAction.<span class="property">editIndex</span> = <span class="literal">undefined</span>;</span><br><span class="line">                                gridAction.<span class="title function_">initialBeginEditorRow</span>();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        gridAction.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;deleteRow&#x27;</span>, rowIndex);</span><br><span class="line">                        gridAction.<span class="property">editIndex</span> = <span class="literal">undefined</span>;</span><br><span class="line">                        gridAction.<span class="title function_">initialBeginEditorRow</span>();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="comment">//根据配置添加最后一行删除列</span></span><br><span class="line">                <span class="attr">appendDeleteColumn</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (options.<span class="property">hasDeleteColumn</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> gridAction = <span class="variable language_">this</span>;</span><br><span class="line">                        <span class="keyword">var</span> $tb = <span class="variable language_">this</span>.<span class="property">grid</span>;</span><br><span class="line">                        <span class="keyword">var</span> columns = <span class="variable language_">this</span>.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;options&#x27;</span>).<span class="property">columns</span>;</span><br><span class="line">                        columns[<span class="number">0</span>].<span class="title function_">push</span>(&#123;</span><br><span class="line">                            <span class="attr">field</span>: <span class="string">&#x27;col_delete_btn&#x27;</span>,</span><br><span class="line">                            <span class="attr">title</span>: <span class="string">&#x27;操作&#x27;</span>,</span><br><span class="line">                            <span class="attr">width</span>: options.<span class="property">deleteColumnWidth</span>,</span><br><span class="line">                            <span class="attr">align</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">                            <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">value, row, index</span>) &#123;</span><br><span class="line">                                <span class="keyword">return</span> <span class="string">&#x27;&lt;a href=&quot;javascript:void(0);&quot; data-id=&quot;&#x27;</span> + row[options.<span class="property">primarykey</span>] + <span class="string">&#x27;&quot; class=&quot;col-delete-btn&quot; &gt;&lt;/a&gt;&#x27;</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                        <span class="keyword">var</span> $ptb = <span class="variable language_">this</span>.<span class="property">grid</span>.<span class="title function_">parent</span>();</span><br><span class="line">                        <span class="comment">//绑定点击事件</span></span><br><span class="line">                        $ptb.<span class="title function_">delegate</span>(<span class="string">&#x27;a.col-delete-btn&#x27;</span>, <span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                            <span class="keyword">var</span> $tr = $(<span class="variable language_">this</span>).<span class="title function_">parents</span>(<span class="string">&#x27;tr.datagrid-row&#x27;</span>);</span><br><span class="line">                            <span class="keyword">var</span> rowIndex = <span class="variable language_">window</span>.<span class="built_in">parseInt</span>($tr.<span class="title function_">attr</span>(<span class="string">&#x27;datagrid-row-index&#x27;</span>));</span><br><span class="line">                            <span class="keyword">var</span> row = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getRows&#x27;</span>)[rowIndex];</span><br><span class="line">                            gridAction.<span class="title function_">deleteRow</span>(row, rowIndex);</span><br><span class="line">                        &#125;);</span><br><span class="line">                        <span class="comment">//绑定keydown 事件</span></span><br><span class="line">                        $ptb.<span class="title function_">delegate</span>(<span class="string">&#x27;a.col-delete-btn&#x27;</span>, <span class="string">&#x27;keydown&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (e.<span class="property">key</span> == <span class="string">&quot;ArrowLeft&quot;</span>) &#123;</span><br><span class="line">                                <span class="keyword">var</span> $tr = $(<span class="variable language_">this</span>).<span class="title function_">parents</span>(<span class="string">&#x27;tr.datagrid-row-editing&#x27;</span>);</span><br><span class="line">                                <span class="keyword">var</span> rowIndex = <span class="variable language_">window</span>.<span class="built_in">parseInt</span>($tr.<span class="title function_">attr</span>(<span class="string">&#x27;datagrid-row-index&#x27;</span>));</span><br><span class="line">                                <span class="keyword">var</span> editors = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, rowIndex);</span><br><span class="line"></span><br><span class="line">                                gridAction.<span class="title function_">editorFocus</span>(editors[editors.<span class="property">length</span> - <span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">key</span> == <span class="string">&quot;ArrowRight&quot;</span>) &#123;</span><br><span class="line">                                <span class="keyword">var</span> $tr = $(<span class="variable language_">this</span>).<span class="title function_">parents</span>(<span class="string">&#x27;tr.datagrid-row-editing&#x27;</span>);</span><br><span class="line">                                <span class="keyword">var</span> rowIndex = <span class="variable language_">window</span>.<span class="built_in">parseInt</span>($tr.<span class="title function_">attr</span>(<span class="string">&#x27;datagrid-row-index&#x27;</span>));</span><br><span class="line">                                <span class="keyword">var</span> editors = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, rowIndex);</span><br><span class="line">                                gridAction.<span class="title function_">editorFocus</span>(editors[<span class="number">0</span>]);</span><br><span class="line">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">key</span> == <span class="string">&quot;ArrowUp&quot;</span>) &#123;</span><br><span class="line">                                <span class="keyword">var</span> $mainTable = $(<span class="variable language_">this</span>).<span class="title function_">parents</span>(<span class="string">&#x27;table.datagrid-btable&#x27;</span>);</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">var</span> $tr = $(<span class="variable language_">this</span>).<span class="title function_">parents</span>(<span class="string">&#x27;tr.datagrid-row-editing&#x27;</span>);</span><br><span class="line">                                <span class="keyword">var</span> rowIndex = <span class="variable language_">window</span>.<span class="built_in">parseInt</span>($tr.<span class="title function_">attr</span>(<span class="string">&#x27;datagrid-row-index&#x27;</span>));</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">if</span> ($tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;validateRow&#x27;</span>, gridAction.<span class="property">editIndex</span>) === <span class="literal">false</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">var</span> calcIndex = rowIndex - <span class="number">1</span>;</span><br><span class="line">                                <span class="keyword">if</span> (calcIndex &lt; <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">                                $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;endEdit&#x27;</span>, rowIndex);</span><br><span class="line">                                $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;selectRow&#x27;</span>, calcIndex).<span class="title function_">datagrid</span>(<span class="string">&#x27;beginEdit&#x27;</span>, calcIndex);</span><br><span class="line"></span><br><span class="line">                                $tr = $mainTable.<span class="title function_">find</span>(<span class="string">&#x27;tr.datagrid-row-editing&#x27;</span>);</span><br><span class="line"></span><br><span class="line">                                rowIndex = <span class="variable language_">window</span>.<span class="built_in">parseInt</span>($tr.<span class="title function_">attr</span>(<span class="string">&#x27;datagrid-row-index&#x27;</span>));</span><br><span class="line">                                <span class="keyword">var</span> editors = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, rowIndex);</span><br><span class="line"></span><br><span class="line">                                gridAction.<span class="title function_">bindEditorsEvent</span>(editors);</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">var</span> $delBtn = $tr.<span class="title function_">find</span>(<span class="string">&#x27;&gt;td&#x27;</span>).<span class="title function_">eq</span>(editors.<span class="property">length</span>).<span class="title function_">find</span>(<span class="string">&#x27;a.l-btn&#x27;</span>);</span><br><span class="line">                                <span class="keyword">if</span> ($delBtn.<span class="property">length</span> &gt; <span class="number">0</span>)</span><br><span class="line">                                    $delBtn.<span class="title function_">focus</span>();</span><br><span class="line"></span><br><span class="line">                                gridAction.<span class="property">editIndex</span> = rowIndex;</span><br><span class="line">                                gridAction.<span class="title function_">renderDeleteButtom</span>();</span><br><span class="line">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">key</span> == <span class="string">&quot;ArrowDown&quot;</span>) &#123;</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">if</span> ($tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;validateRow&#x27;</span>, gridAction.<span class="property">editIndex</span>) === <span class="literal">false</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">var</span> $mainTable = $(<span class="variable language_">this</span>).<span class="title function_">parents</span>(<span class="string">&#x27;table.datagrid-btable&#x27;</span>);</span><br><span class="line">                                <span class="keyword">var</span> $tr = $(<span class="variable language_">this</span>).<span class="title function_">parents</span>(<span class="string">&#x27;tr.datagrid-row-editing&#x27;</span>);</span><br><span class="line">                                <span class="keyword">var</span> rowIndex = <span class="variable language_">window</span>.<span class="built_in">parseInt</span>($tr.<span class="title function_">attr</span>(<span class="string">&#x27;datagrid-row-index&#x27;</span>));</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">var</span> calcIndex = rowIndex + <span class="number">1</span>;</span><br><span class="line">                                <span class="keyword">var</span> row = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getRows&#x27;</span>)[calcIndex];</span><br><span class="line">                                <span class="keyword">if</span> (row) &#123;</span><br><span class="line"></span><br><span class="line">                                    $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;endEdit&#x27;</span>, rowIndex);</span><br><span class="line">                                    $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;selectRow&#x27;</span>, calcIndex).<span class="title function_">datagrid</span>(<span class="string">&#x27;beginEdit&#x27;</span>, calcIndex);</span><br><span class="line"></span><br><span class="line">                                    gridAction.<span class="title function_">renderDeleteButtom</span>();</span><br><span class="line"></span><br><span class="line">                                    $tr = $mainTable.<span class="title function_">find</span>(<span class="string">&#x27;tr.datagrid-row-editing&#x27;</span>);</span><br><span class="line"></span><br><span class="line">                                    rowIndex = <span class="variable language_">window</span>.<span class="built_in">parseInt</span>($tr.<span class="title function_">attr</span>(<span class="string">&#x27;datagrid-row-index&#x27;</span>));</span><br><span class="line">                                    <span class="keyword">var</span> editors = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, rowIndex);</span><br><span class="line"></span><br><span class="line">                                    gridAction.<span class="title function_">bindEditorsEvent</span>(editors);</span><br><span class="line"></span><br><span class="line">                                    <span class="keyword">var</span> $delBtn = $tr.<span class="title function_">find</span>(<span class="string">&#x27;&gt;td&#x27;</span>).<span class="title function_">eq</span>(editors.<span class="property">length</span>).<span class="title function_">find</span>(<span class="string">&#x27;a.l-btn&#x27;</span>);</span><br><span class="line">                                    <span class="keyword">if</span> ($delBtn.<span class="property">length</span> &gt; <span class="number">0</span>)</span><br><span class="line">                                        $delBtn.<span class="title function_">focus</span>();</span><br><span class="line"></span><br><span class="line">                                    gridAction.<span class="property">editIndex</span> = rowIndex;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">bindEditorsEvent</span>: <span class="keyword">function</span> (<span class="params">editors</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> gridAction = <span class="variable language_">this</span>;</span><br><span class="line">                    <span class="keyword">var</span> $tb = <span class="variable language_">this</span>.<span class="property">grid</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// start keydown</span></span><br><span class="line">                    <span class="keyword">function</span> <span class="title function_">keydown</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> isDirection = <span class="literal">false</span>;</span><br><span class="line">                        <span class="keyword">var</span> $tr = $(<span class="variable language_">this</span>).<span class="title function_">closest</span>(<span class="string">&quot;tr.datagrid-row&quot;</span>);</span><br><span class="line">                        <span class="keyword">var</span> rowIndex = <span class="variable language_">window</span>.<span class="built_in">parseInt</span>($tr.<span class="title function_">attr</span>(<span class="string">&#x27;datagrid-row-index&#x27;</span>));</span><br><span class="line">                        <span class="keyword">var</span> calcIndex = -<span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">switch</span> (e.<span class="property">key</span>) &#123;</span><br><span class="line">                            <span class="keyword">case</span> <span class="string">&quot;ArrowUp&quot;</span>:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                calcIndex = rowIndex - <span class="number">1</span>;</span><br><span class="line">                                <span class="keyword">if</span> (calcIndex &lt; <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">                                isDirection = <span class="literal">true</span>;</span><br><span class="line">                                <span class="keyword">if</span> ($tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;validateRow&#x27;</span>, gridAction.<span class="property">editIndex</span>) === <span class="literal">false</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">var</span> focusColIndex = gridAction.<span class="title function_">getFocusColIndex</span>(<span class="variable language_">this</span>);</span><br><span class="line">                                $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;endEdit&#x27;</span>, rowIndex);</span><br><span class="line">                                gridAction.<span class="title function_">renderDeleteButtom</span>();</span><br><span class="line"></span><br><span class="line">                                $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;selectRow&#x27;</span>, calcIndex).<span class="title function_">datagrid</span>(<span class="string">&#x27;beginEdit&#x27;</span>, calcIndex);</span><br><span class="line">                                <span class="keyword">var</span> editors = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, calcIndex);</span><br><span class="line"></span><br><span class="line">                                gridAction.<span class="title function_">bindEditorsEvent</span>(editors);</span><br><span class="line"></span><br><span class="line">                                gridAction.<span class="title function_">editorFocus</span>(editors[focusColIndex]);</span><br><span class="line"></span><br><span class="line">                                gridAction.<span class="property">editIndex</span> = calcIndex;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> <span class="string">&quot;ArrowDown&quot;</span>:</span><br><span class="line"></span><br><span class="line">                                isDirection = <span class="literal">true</span>;</span><br><span class="line">                                <span class="keyword">if</span> ($tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;validateRow&#x27;</span>, gridAction.<span class="property">editIndex</span>) === <span class="literal">false</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">var</span> focusColIndex = gridAction.<span class="title function_">getFocusColIndex</span>(<span class="variable language_">this</span>);</span><br><span class="line">                                $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;endEdit&#x27;</span>, rowIndex);</span><br><span class="line">                                gridAction.<span class="title function_">renderDeleteButtom</span>();</span><br><span class="line"></span><br><span class="line">                                calcIndex = rowIndex + <span class="number">1</span>;</span><br><span class="line">                                <span class="keyword">var</span> row = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getRows&#x27;</span>)[calcIndex];</span><br><span class="line">                                <span class="keyword">if</span> (row) &#123;</span><br><span class="line">                                    $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;selectRow&#x27;</span>, calcIndex).<span class="title function_">datagrid</span>(<span class="string">&#x27;beginEdit&#x27;</span>, calcIndex);</span><br><span class="line">                                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                    <span class="keyword">var</span> newRow = options.<span class="property">onInitNewRow</span>.<span class="title function_">call</span>($tb, calcIndex);</span><br><span class="line">                                    $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;appendRow&#x27;</span>, newRow || &#123;&#125;);</span><br><span class="line">                                    $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;selectRow&#x27;</span>, calcIndex).<span class="title function_">datagrid</span>(<span class="string">&#x27;beginEdit&#x27;</span>, calcIndex);</span><br><span class="line">                                &#125;</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">var</span> editors = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, calcIndex);</span><br><span class="line"></span><br><span class="line">                                gridAction.<span class="title function_">bindEditorsEvent</span>(editors);</span><br><span class="line"></span><br><span class="line">                                gridAction.<span class="title function_">editorFocus</span>(editors[focusColIndex]);</span><br><span class="line"></span><br><span class="line">                                gridAction.<span class="property">editIndex</span> = calcIndex;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> <span class="string">&quot;ArrowLeft&quot;</span>:</span><br><span class="line">                                <span class="keyword">var</span> editors = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, rowIndex);</span><br><span class="line">                                <span class="keyword">var</span> colIndex = gridAction.<span class="title function_">getFocusColIndex</span>(<span class="variable language_">this</span>);</span><br><span class="line">                                <span class="keyword">var</span> editor = editors[colIndex - <span class="number">1</span>];</span><br><span class="line">                                <span class="keyword">if</span> (editor) &#123;</span><br><span class="line">                                    gridAction.<span class="title function_">editorFocus</span>(editor);</span><br><span class="line">                                &#125;</span><br><span class="line">                                isDirection = <span class="literal">true</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> <span class="string">&quot;ArrowRight&quot;</span>:</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">var</span> editors = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, rowIndex);</span><br><span class="line">                                <span class="keyword">var</span> colIndex = gridAction.<span class="title function_">getFocusColIndex</span>(<span class="variable language_">this</span>);</span><br><span class="line">                                <span class="keyword">var</span> colIdx = colIndex + <span class="number">1</span>;</span><br><span class="line">                                <span class="keyword">var</span> editor = editors[colIdx];</span><br><span class="line">                                <span class="keyword">if</span> (editor) &#123;</span><br><span class="line">                                    gridAction.<span class="title function_">editorFocus</span>(editor);</span><br><span class="line">                                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                    <span class="keyword">var</span> $delBtn = $tr.<span class="title function_">find</span>(<span class="string">&#x27;&gt;td&#x27;</span>).<span class="title function_">eq</span>(colIdx).<span class="title function_">find</span>(<span class="string">&#x27;a.l-btn&#x27;</span>);</span><br><span class="line">                                    <span class="keyword">if</span> ($delBtn.<span class="property">length</span> &gt; <span class="number">0</span>)</span><br><span class="line">                                        $delBtn.<span class="title function_">focus</span>();</span><br><span class="line">                                &#125;</span><br><span class="line"></span><br><span class="line">                                isDirection = <span class="literal">true</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> <span class="string">&quot;Enter&quot;</span>:</span><br><span class="line">                                <span class="keyword">var</span> editors = $tb.<span class="title function_">datagrid</span>(<span class="string">&#x27;getEditors&#x27;</span>, rowIndex);</span><br><span class="line">                                <span class="keyword">var</span> colIndex = gridAction.<span class="title function_">getFocusColIndex</span>(<span class="variable language_">this</span>);</span><br><span class="line">                                <span class="keyword">var</span> colIdx = colIndex + <span class="number">1</span>;</span><br><span class="line">                                <span class="keyword">var</span> editor = editors[colIdx];</span><br><span class="line">                                <span class="keyword">if</span> (editor) &#123;</span><br><span class="line">                                    gridAction.<span class="title function_">editorFocus</span>(editor);</span><br><span class="line">                                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                    <span class="keyword">var</span> $delBtn = $tr.<span class="title function_">find</span>(<span class="string">&#x27;&gt;td&#x27;</span>).<span class="title function_">eq</span>(colIdx).<span class="title function_">find</span>(<span class="string">&#x27;a.l-btn&#x27;</span>);</span><br><span class="line">                                    <span class="keyword">if</span> ($delBtn.<span class="property">length</span> &gt; <span class="number">0</span>)</span><br><span class="line">                                        $delBtn.<span class="title function_">focus</span>();</span><br><span class="line">                                &#125;</span><br><span class="line">                                isDirection = <span class="literal">true</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> <span class="string">&quot;Delete&quot;</span>:</span><br><span class="line">                                <span class="keyword">var</span> row = gridAction.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;getRows&#x27;</span>)[rowIndex];</span><br><span class="line">                                gridAction.<span class="title function_">deleteRow</span>(row, rowIndex);</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (isDirection) &#123;</span><br><span class="line">                            e.<span class="title function_">stopPropagation</span>();<span class="comment">//阻止事件冒泡  ，可阻止父类事件的发生</span></span><br><span class="line">                            e.<span class="title function_">preventDefault</span>();<span class="comment">//阻止默认行为  如A标签</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// end keydown</span></span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> editors) &#123;</span><br><span class="line">                        <span class="keyword">var</span> editor = editors[index];</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="title function_">bindEditorKeydownEvent</span>(editor, keydown);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">bindEditorKeydownEvent</span>: <span class="keyword">function</span> (<span class="params">editor, keydown</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (editor.<span class="property">type</span> == <span class="string">&#x27;checkbox&#x27;</span>) &#123;</span><br><span class="line">                        $(editor.<span class="property">target</span>).<span class="title function_">keydown</span>(keydown);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">var</span> $target = $(editor.<span class="property">target</span>[editor.<span class="property">type</span>](<span class="string">&#x27;textbox&#x27;</span>));</span><br><span class="line">                        $target.<span class="title function_">unbind</span>(<span class="string">&#x27;keydown&#x27;</span>);</span><br><span class="line">                        $target.<span class="title function_">keydown</span>(keydown);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">editorFocus</span>: <span class="keyword">function</span> (<span class="params">editor</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (editor.<span class="property">type</span> == <span class="string">&#x27;checkbox&#x27;</span>) &#123;</span><br><span class="line">                        $(editor.<span class="property">target</span>).<span class="title function_">focus</span>();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        $(editor.<span class="property">target</span>[editor.<span class="property">type</span>](<span class="string">&#x27;textbox&#x27;</span>)).<span class="title function_">focus</span>();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">init</span>: <span class="keyword">function</span> (<span class="params">dom</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">grid</span> = $(dom);</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">appendClickRowEvent</span>();</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">appendLoadSuccessEvent</span>();</span><br><span class="line">                    <span class="keyword">var</span> $grid = <span class="variable language_">this</span>.<span class="property">grid</span>.<span class="title function_">datagrid</span>(options);</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">appendDeleteColumn</span>();</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">initialBeginEditorRow</span>();</span><br><span class="line">                    <span class="keyword">return</span> $grid;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//对外开放的函数</span></span><br><span class="line">            <span class="keyword">var</span> gridMethods = &#123;</span><br><span class="line">                <span class="comment">//清空函数</span></span><br><span class="line">                <span class="attr">clear</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    _grid.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;loadData&#x27;</span>, &#123;<span class="attr">total</span>: <span class="number">0</span> , <span class="attr">rows</span>: []&#125;);</span><br><span class="line">                    _grid.<span class="title function_">initialBeginEditorRow</span>();</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">endEdit</span>: <span class="keyword">function</span> (<span class="params">index</span>) &#123;</span><br><span class="line">                    _grid.<span class="property">grid</span>.<span class="title function_">datagrid</span>(<span class="string">&#x27;endEdit&#x27;</span>, index || _grid.<span class="property">editIndex</span>);</span><br><span class="line">                    _grid.<span class="property">editIndex</span> = <span class="literal">undefined</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            opts.<span class="property">__grid</span> = _grid;</span><br><span class="line">            opts.<span class="property">gridMethods</span> = gridMethods;</span><br><span class="line"></span><br><span class="line">            _grid.<span class="title function_">init</span>(<span class="variable language_">this</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//扩展fn 函数</span></span><br><span class="line">    $.fn.<span class="property">gridedit</span>.<span class="property">methods</span> = &#123;</span><br><span class="line">        <span class="attr">clear</span>: <span class="keyword">function</span> (<span class="params">jq, param</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> jq.<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="keyword">var</span> ge = $.<span class="title function_">data</span>(<span class="variable language_">this</span>, <span class="string">&#x27;gridedit&#x27;</span>);</span><br><span class="line">                ge.<span class="property">options</span>.<span class="property">gridMethods</span>.<span class="title function_">clear</span>();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">endEdit</span>: <span class="keyword">function</span> (<span class="params">jq,param</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> jq.<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> ge = $.<span class="title function_">data</span>(<span class="variable language_">this</span>, <span class="string">&#x27;gridedit&#x27;</span>);</span><br><span class="line">                ge.<span class="property">options</span>.<span class="property">gridMethods</span>.<span class="title function_">endEdit</span>(param);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.jeasyui.com/easyui/themes/default/easyui.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.jeasyui.com/easyui/themes/icon.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.jeasyui.com/easyui/themes/color.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.jeasyui.com/easyui/demo/demo.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-1.9.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://www.jeasyui.com/easyui/jquery.easyui.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 这里我将插件代码 保存到另一个文件 并其名为 jquery.easyui.griedit.js ，然后引用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;jquery.easyui.gridedit.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>可编辑表格<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;tb&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> $tb = $(<span class="string">&#x27;#tb&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> cols = [[&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">field</span>: <span class="string">&#x27;text&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript"><span class="attr">title</span>: <span class="string">&#x27;文本&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">width</span>: <span class="number">200</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">editor</span>: <span class="string">&#x27;text&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">field</span>: <span class="string">&#x27;name&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">title</span>: <span class="string">&#x27;名称&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">width</span>: <span class="number">200</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">editor</span>: <span class="string">&#x27;text&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">field</span>: <span class="string">&#x27;field_1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">title</span>: <span class="string">&#x27;字段1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">width</span>: <span class="number">200</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">editor</span>: <span class="string">&#x27;datebox&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">field</span>: <span class="string">&#x27;field_2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">title</span>: <span class="string">&#x27;字段2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">width</span>: <span class="number">200</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">editor</span>: <span class="string">&#x27;combobox&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;]];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 使用的方式和 datagrid 一样 只不过将datagrid 改为了 gridedit </span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            $tb.<span class="title function_">gridedit</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">columns</span>: cols,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">onDeleteRow</span>: <span class="keyword">function</span>(<span class="params">val, row,index</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(row);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;on delete row&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">onClickRow</span>: <span class="keyword">function</span>(<span class="params">index, row</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;on click row&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">onInitNewRow</span>: <span class="keyword">function</span>(<span class="params">index</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;on init new row&#x27;</span>+ index);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> &#123; <span class="attr">name</span>:<span class="string">&#x27;name &#x27;</span>+ (index +<span class="number">1</span>)  &#125;;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 生成假数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> fakeData = [];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">10</span>;i++) </span></span><br><span class="line"><span class="language-javascript">                fakeData.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;name &#x27;</span> + i&#125;);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 加载假数据</span></span></span><br><span class="line"><span class="language-javascript">            $tb.<span class="title function_">gridedit</span>(<span class="string">&#x27;loadData&#x27;</span>, &#123;<span class="attr">total</span>: fakeData.<span class="property">length</span>, <span class="attr">rows</span>: fakeData&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 调用方法 示例</span></span></span><br><span class="line"><span class="language-javascript">            $tb.<span class="title function_">grededit</span>(<span class="string">&#x27;clear&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            $tb.<span class="title function_">grededit</span>(<span class="string">&#x27;endEdit&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;扩展datagrid 的编辑，实现使用方向来进行表格编辑操作，减少编辑一行就动一下鼠标的麻烦。&lt;/p&gt;
&lt;h2 id=&quot;依赖&quot;&gt;&lt;a hre</summary>
      
    
    
    
    
    <category term="easyui" scheme="https://luchangjiu.github.io/tags/easyui/"/>
    
  </entry>
  
  <entry>
    <title>复制代码到word 文档美化格式</title>
    <link href="https://luchangjiu.github.io/2022/03/26/office/office-word-copy-code/"/>
    <id>https://luchangjiu.github.io/2022/03/26/office/office-word-copy-code/</id>
    <published>2022-03-26T09:30:22.000Z</published>
    <updated>2022-04-13T15:22:53.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>在编写word 文档时有时候需要将代码复制到word 文档中， 但是它的格式不太好看，<br>可以使用下面的网站来进行代码格式化后复制到文档上，就可以了。</p><p><a href="https://highlightcode.com/">HIGHLIGHTCODE</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h2&gt;&lt;p&gt;在编写word 文档时有时候需要将代码复制到word 文档中， 但是它的格式不太好看，&lt;br&gt;可以使用下面的网站来进行代码格式化后复制到文档</summary>
      
    
    
    
    
    <category term="office" scheme="https://luchangjiu.github.io/tags/office/"/>
    
  </entry>
  
  <entry>
    <title>java 中的vo、po、do、dto、bo、qo、dao、pojo的概念</title>
    <link href="https://luchangjiu.github.io/2022/03/22/java/java_vo_po_dto_bo_qo_dao_pojo_concept/"/>
    <id>https://luchangjiu.github.io/2022/03/22/java/java_vo_po_dto_bo_qo_dao_pojo_concept/</id>
    <published>2022-03-22T12:55:23.000Z</published>
    <updated>2022-04-13T15:22:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>来源 <a href="http://www.hollischuang.com/archives/553">java 中的vo、po、do、dto、bo、qo、dao、pojo的概念</a></p><p>本博客仅转载记录学习</p><h2 id="PO-persistant-object-持久对象"><a href="#PO-persistant-object-持久对象" class="headerlink" title="PO(persistant object) 持久对象"></a>PO(persistant object) 持久对象</h2><p>在 o&#x2F;r 映射的时候出现的概念，如果没有 o&#x2F;r 映射，没有这个概念存在了。通常对应数据模型 ( 数据库 ), 本身还有部分业务逻辑的处理。可以看成是与数据库中的表相映射的 java 对象。最简单的 PO 就是对应数据库中某个表中的一条记录，多个记录可以用 PO 的集合。 PO 中应该不包含任何对数据库的操作。</p><h2 id="DO（Domain-Object）领域对象"><a href="#DO（Domain-Object）领域对象" class="headerlink" title="DO（Domain Object）领域对象"></a>DO（Domain Object）领域对象</h2><p>就是从现实世界中抽象出来的有形或无形的业务实体。一般和数据中的表结构对应。</p><h2 id="TO-Transfer-Object-，数据传输对象"><a href="#TO-Transfer-Object-，数据传输对象" class="headerlink" title="TO(Transfer Object) ，数据传输对象"></a>TO(Transfer Object) ，数据传输对象</h2><p>在应用程序不同 tie( 关系 ) 之间传输的对象</p><h2 id="DTO（Data-Transfer-Object）数据传输对象"><a href="#DTO（Data-Transfer-Object）数据传输对象" class="headerlink" title="DTO（Data Transfer Object）数据传输对象"></a>DTO（Data Transfer Object）数据传输对象</h2><p>这个概念来源于J2EE的设计模式，原来的目的是为了EJB的分布式应用提供粗粒度的数据实体，以减少分布式调用的次数，从而提高分布式调用的性能和降低网络负载，但在这里，我泛指用于展示层与服务层之间的数据传输对象。</p><h2 id="VO-view-object-值对象"><a href="#VO-view-object-值对象" class="headerlink" title="VO(view object) 值对象"></a>VO(view object) 值对象</h2><p>视图对象，用于展示层，它的作用是把某个指定页面（或组件）的所有数据封装起来。</p><h2 id="BO-business-object-业务对象"><a href="#BO-business-object-业务对象" class="headerlink" title="BO(business object) 业务对象"></a>BO(business object) 业务对象</h2><p>从业务模型的角度看 , 见 UML 元件领域模型中的领域对象。封装业务逻辑的 java 对象 , 通过调用 DAO 方法 , 结合 PO,VO 进行业务操作。 business object: 业务对象 主要作用是把业务逻辑封装为一个对象。这个对象可以包括一个或多个其它的对象。 比如一个简历，有教育经历、工作经历、社会关系等等。 我们可以把教育经历对应一个 PO ，工作经历对应一个 PO ，社会关系对应一个 PO 。 建立一个对应简历的 BO 对象处理简历，每个 BO 包含这些 PO 。 这样处理业务逻辑时，我们就可以针对 BO 去处理。</p><h2 id="POJO-plain-ordinary-java-object-简单无规则-java-对象"><a href="#POJO-plain-ordinary-java-object-简单无规则-java-对象" class="headerlink" title="POJO(plain ordinary java object) 简单无规则 java 对象"></a>POJO(plain ordinary java object) 简单无规则 java 对象</h2><p>纯的传统意义的 java 对象。就是说在一些 Object&#x2F;Relation Mapping 工具中，能够做到维护数据库表记录的 persisent object 完全是一个符合 Java Bean 规范的纯 Java 对象，没有增加别的属性和方法。我的理解就是最基本的 Java Bean ，只有属性字段及 setter 和 getter 方法！。</p><h2 id="DAO-data-access-object-数据访问对象"><a href="#DAO-data-access-object-数据访问对象" class="headerlink" title="DAO(data access object) 数据访问对象"></a>DAO(data access object) 数据访问对象</h2><p>是一个 sun 的一个标准 j2ee 设计模式， 这个模式中有个接口就是 DAO ，它负持久层的操作。为业务层提供接口。此对象用于访问数据库。通常和 PO 结合使用， DAO 中包含了各种数据库的操作方法。通过它的方法 , 结合 PO 对数据库进行相关的操作。夹在业务逻辑与数据库资源中间。配合 VO, 提供数据库的 CRUD 操作</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;来源 &lt;a href=&quot;http://www.hollischuang.com/archives/553&quot;&gt;java 中的vo、po、do、</summary>
      
    
    
    
    
    <category term="java" scheme="https://luchangjiu.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Redis 模糊删除key</title>
    <link href="https://luchangjiu.github.io/2022/03/22/redis/redis-script-del/"/>
    <id>https://luchangjiu.github.io/2022/03/22/redis/redis-script-del/</id>
    <published>2022-03-21T18:15:02.000Z</published>
    <updated>2022-04-13T15:22:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>有时候遇到想直接在服务端批量删除key,或者通过模糊查询key 来删除redis 的数据，那可以使用下面的脚本来实现。<br>本次操作在Ubuntu 系统操作的</p><h2 id="编写删除命令的lua脚本"><a href="#编写删除命令的lua脚本" class="headerlink" title="编写删除命令的lua脚本"></a>编写删除命令的lua脚本</h2><p>redis-cli 可以通过 解析 lua 脚本来执行信息，我们可以利用这点来实现模糊删除key。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建 lua 脚本</span></span><br><span class="line"></span><br><span class="line">vim del.lua</span><br><span class="line"><span class="comment"># 编写以下代码</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">local</span> key = KEYS[1]</span><br><span class="line"><span class="built_in">local</span> list = redis.call(<span class="string">&quot;keys&quot;</span>, key)</span><br><span class="line"><span class="keyword">for</span> i, v <span class="keyword">in</span> ipairs(list) <span class="keyword">do</span></span><br><span class="line">    redis.call(<span class="string">&quot;del&quot;</span>, v);</span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="调用脚本删除"><a href="#调用脚本删除" class="headerlink" title="调用脚本删除"></a>调用脚本删除</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用redis-cli 命令来解析刚刚编写的lua ，并传入需要模糊删除的key信息</span></span><br><span class="line"></span><br><span class="line">redis-cli -n 0 --<span class="built_in">eval</span> /redis/script/del.lua <span class="string">&quot;*需要模糊删除的key*&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>嫌每次都要输入一大串redis-cli 的也可以再编写一个shell 脚本. 然后执行它就好了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;有时候遇到想直接在服务端批量删除key,或者通过模糊查询key 来删除redis 的数据，那可以使用下面的脚本来实现。&lt;br&gt;本次操作在Ub</summary>
      
    
    
    
    
    <category term="redis" scheme="https://luchangjiu.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>Head First 设计模式</title>
    <link href="https://luchangjiu.github.io/2021/07/19/java/Head_First_Design_Pattern/"/>
    <id>https://luchangjiu.github.io/2021/07/19/java/Head_First_Design_Pattern/</id>
    <published>2021-07-19T14:42:02.000Z</published>
    <updated>2023-03-05T14:19:42.498Z</updated>
    
    <content type="html"><![CDATA[<div class="row">    <embed src="/pdf/Head_First_Design_Pattern.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
    
    
      
      
    <summary type="html">

	&lt;div class=&quot;row&quot;&gt;
    &lt;embed src=&quot;/pdf/Head_First_Design_Pattern.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;
	&lt;/div&gt;




</summary>
      
    
    
    
    
    <category term="java" scheme="https://luchangjiu.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>vim 使用技巧</title>
    <link href="https://luchangjiu.github.io/2021/07/19/vim/vim-skills/"/>
    <id>https://luchangjiu.github.io/2021/07/19/vim/vim-skills/</id>
    <published>2021-07-19T14:42:02.000Z</published>
    <updated>2022-05-03T10:52:38.000Z</updated>
    
    <content type="html"><![CDATA[<div class="row">    <embed src="/pdf/vim-skills.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
    
    
      
      
    <summary type="html">

	&lt;div class=&quot;row&quot;&gt;
    &lt;embed src=&quot;/pdf/vim-skills.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;
	&lt;/div&gt;




</summary>
      
    
    
    
    
    <category term="vim" scheme="https://luchangjiu.github.io/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>vim 实用技巧2</title>
    <link href="https://luchangjiu.github.io/2021/07/19/vim/vim-skills2/"/>
    <id>https://luchangjiu.github.io/2021/07/19/vim/vim-skills2/</id>
    <published>2021-07-19T14:42:02.000Z</published>
    <updated>2022-05-03T10:52:35.000Z</updated>
    
    <content type="html"><![CDATA[<div class="row">    <embed src="/pdf/vim-skills2.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
    
    
      
      
    <summary type="html">

	&lt;div class=&quot;row&quot;&gt;
    &lt;embed src=&quot;/pdf/vim-skills2.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;
	&lt;/div&gt;




</summary>
      
    
    
    
    
    <category term="vim" scheme="https://luchangjiu.github.io/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>CentOS7下安装FastDFS</title>
    <link href="https://luchangjiu.github.io/2020/06/26/linux/fastdfs-install/"/>
    <id>https://luchangjiu.github.io/2020/06/26/linux/fastdfs-install/</id>
    <published>2020-06-26T05:28:03.000Z</published>
    <updated>2022-04-13T15:22:53.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>当使用springcloud 微服务实现负载均衡时，遇到文件上传获取的难题，这时可以将文件放到FastDFS 服务上，只需要保存FastDFS返回的文件key 就好。</p><h2 id="下载FastDFS安装依赖包"><a href="#下载FastDFS安装依赖包" class="headerlink" title="下载FastDFS安装依赖包"></a>下载FastDFS安装依赖包</h2><p>有兴趣可以去<a href="https://github.com/happyfish100">作者大佬的博客</a>看看,给个Star啥的。<br><a href="https://github.com/happyfish100/fastdfs/archive/V6.06.tar.gz">fastdfs-6.06.tar.gz</a><br><a href="https://github.com/happyfish100/libfastcommon/archive/V1.0.43.tar.gz">libfastcommon-1.0.43.tar.gz</a><br><a href="https://github.com/happyfish100/fastdfs-nginx-module/archive/V1.22.tar.gz">fastdfs-nginx-module-1.22.tar.gz</a></p><p><strong>下载命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 安装编译依赖</span></span><br><span class="line">yum -y install gcc </span><br><span class="line">yum -y install gcc-c++</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入/opt 文件夹</span></span><br><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line"><span class="comment"># 创建文件夹 softwares</span></span><br><span class="line"><span class="built_in">mkdir</span> softwares </span><br><span class="line"><span class="comment"># 进入softwares </span></span><br><span class="line"><span class="built_in">cd</span> softwares</span><br><span class="line"><span class="comment"># 下载fastdfs依赖文件</span></span><br><span class="line">wget -O fastdfs-6.06.tar.gz https://github.com/happyfish100/fastdfs/archive/V6.06.tar.gz</span><br><span class="line">wget -O libfastcommon-1.0.43.tar.gz https://github.com/happyfish100/libfastcommon/archive/V1.0.43.tar.gz</span><br><span class="line">wget -O fastdfs-nginx-module-1.22.tar.gz https://github.com/happyfish100/fastdfs-nginx-module/archive/V1.22.tar.gz</span><br></pre></td></tr></table></figure><p>访问时依赖nginx 所以也要下载nginx<br><a href="http://nginx.org/en/download.html">nginx 官网</a></p><h2 id="安装并配置"><a href="#安装并配置" class="headerlink" title="安装并配置"></a>安装并配置</h2><p>安装是有顺序的，先安装 libfastcommon再安装 fastdfs， 如果有需要用到nginx，就先安装nginx，再配置fastdfs-nginx-module 包</p><h3 id="安装libfastcommon"><a href="#安装libfastcommon" class="headerlink" title="安装libfastcommon"></a>安装libfastcommon</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入 /opt/softwares文件夹</span></span><br><span class="line"><span class="built_in">cd</span> /opt/softwares</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压 libfastcommon-1.0.43.tar.gz </span></span><br><span class="line">tar -zxvf libfastcommon-1.0.43.tar.gz</span><br><span class="line"><span class="comment"># 进入解压好的文件夹里面</span></span><br><span class="line"><span class="built_in">cd</span> libfastcommon-1.0.43/</span><br><span class="line"><span class="comment"># 运行make.sh编译 </span></span><br><span class="line">./make.sh</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">./make.sh install</span><br></pre></td></tr></table></figure><h3 id="安装fastdfs"><a href="#安装fastdfs" class="headerlink" title="安装fastdfs"></a>安装fastdfs</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入 /opt/softwares文件夹</span></span><br><span class="line"><span class="built_in">cd</span> /opt/softwares</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -zxvf fastdfs-6.06.tar.gz</span><br><span class="line"><span class="comment"># 进入解压好的文件夹里面</span></span><br><span class="line"><span class="built_in">cd</span> fastdfs-6.06</span><br><span class="line"><span class="comment"># 运行make.sh编译 </span></span><br><span class="line">./make.sh</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">./make.sh install</span><br></pre></td></tr></table></figure><h3 id="配置fastdfs"><a href="#配置fastdfs" class="headerlink" title="配置fastdfs"></a>配置fastdfs</h3><h4 id="创建数据文件夹"><a href="#创建数据文件夹" class="headerlink" title="创建数据文件夹"></a>创建数据文件夹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建tracker 日志和数据文件存放的地址</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /data/fastdfs/tracker</span><br><span class="line"><span class="comment"># 创建storage 日志和数据文件存放的地址</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /data/fastdfs/storage</span><br><span class="line"><span class="comment"># 数据存放在store0 文件夹上</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /data/fastdfs/storage/store0</span><br></pre></td></tr></table></figure><h4 id="配置tracker-conf"><a href="#配置tracker-conf" class="headerlink" title="配置tracker.conf"></a>配置tracker.conf</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入fastdfs 配置文件目录</span></span><br><span class="line"><span class="built_in">cd</span> /etc/fdfs </span><br><span class="line"><span class="comment"># 查看配置文件</span></span><br><span class="line"><span class="built_in">ls</span> -lh</span><br><span class="line"><span class="comment"># 备份tracker.conf </span></span><br><span class="line"><span class="built_in">cp</span> tracker.conf.sample tracker.conf</span><br><span class="line"><span class="comment"># 编辑tracker.conf</span></span><br><span class="line">vi tracker.conf</span><br><span class="line"><span class="comment"># 配置 bash_path = /data/fastdfs/tracker</span></span><br></pre></td></tr></table></figure><h4 id="配置storage-conf-和-storage-ids-conf"><a href="#配置storage-conf-和-storage-ids-conf" class="headerlink" title="配置storage.conf 和 storage_ids.conf"></a>配置storage.conf 和 storage_ids.conf</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 进入fastdfs 配置文件目录</span></span><br><span class="line"><span class="built_in">cd</span> /etc/fdfs </span><br><span class="line"><span class="comment"># 查看配置文件</span></span><br><span class="line"><span class="built_in">ls</span> -lh</span><br><span class="line"><span class="comment"># 备份storage.conf</span></span><br><span class="line"><span class="built_in">cp</span> storage.conf.sample storage.conf</span><br><span class="line"><span class="comment"># 编辑storage.conf</span></span><br><span class="line">vi storage.conf</span><br><span class="line"><span class="comment"># group_name = group1 这里可以自定义group名称</span></span><br><span class="line"><span class="comment"># base_path = /data/fastdfs/storage 配置storage基础路径</span></span><br><span class="line"><span class="comment"># store_path = /data/fastdfs/storage/store0 配置数据存放路径</span></span><br><span class="line"><span class="comment"># tracker_server = 192.168.3.12:22122  这里不能写成127.0.0.1 ，由于只有一台tracker 服务所以写本机ip 就好了</span></span><br><span class="line"><span class="comment"># 备份storage_ids.conf</span></span><br><span class="line"><span class="built_in">cp</span> storage_ids.conf.sample storage_ids.conf</span><br><span class="line"><span class="comment"># 编辑 storage_ids.conf</span></span><br><span class="line">vi storage_ids.conf</span><br><span class="line"><span class="comment"># 100001   group1  192.168.3.12 由于只有一个group1 所以保留一个，改成本机ip地址就好</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h2><p>启动服务在<code>/etc/init.d</code>下</p><h3 id="启动tracker服务"><a href="#启动tracker服务" class="headerlink" title="启动tracker服务"></a>启动tracker服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入/etc/init.d</span></span><br><span class="line"><span class="built_in">cd</span> /etc/init.d</span><br><span class="line"><span class="comment"># 指定配置 文件启动 ， 可以不指定它会默认去找  tracker.conf</span></span><br><span class="line">./fdfs_trackerd start  /etc/fdfs/tracker.conf</span><br></pre></td></tr></table></figure><h3 id="启动storage服务"><a href="#启动storage服务" class="headerlink" title="启动storage服务"></a>启动storage服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入/etc/init.d</span></span><br><span class="line"><span class="built_in">cd</span> /etc/init.d</span><br><span class="line"><span class="comment"># 指定配置 文件启动 ， 可以不指定它会默认去找  storage.conf</span></span><br><span class="line">./fdfs_storaged start /etc/sdfs/storage.conf </span><br><span class="line"><span class="comment"># 如果想在本机启动多个storage 可以复制多个storage.conf 改变名字和里面配置的端口参数,</span></span><br><span class="line"><span class="comment"># 然后通过指定配置文件启动的方式启动多个storage服务</span></span><br><span class="line"><span class="comment"># 比如 ./fdfs_storaged start /etc/sdfs/storage1.conf </span></span><br><span class="line"><span class="comment"># ./fdfs_storaged start /etc/sdfs/storage2.conf 等，启动多个storage</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><h3 id="先安装nginx-依赖包"><a href="#先安装nginx-依赖包" class="headerlink" title="先安装nginx 依赖包"></a>先安装nginx 依赖包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y pcre pcre-devel</span><br><span class="line">yum install -y zlib zlib-devel</span><br><span class="line">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure><h3 id="下载nginx并解压"><a href="#下载nginx并解压" class="headerlink" title="下载nginx并解压"></a>下载nginx并解压</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/softwares/</span><br><span class="line">wget -c https://nginx.org/download/nginx-1.16.1.tar.gz</span><br><span class="line">tar -zxvf nginx-1.16.1.tar.gz</span><br></pre></td></tr></table></figure><h3 id="配置并安装nginx"><a href="#配置并安装nginx" class="headerlink" title="配置并安装nginx"></a>配置并安装nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入解压后的目录</span></span><br><span class="line"><span class="built_in">cd</span> nginx-1.16.1 </span><br><span class="line"><span class="comment"># 执行默认配置</span></span><br><span class="line">./configure</span><br><span class="line"><span class="comment"># 编译</span></span><br><span class="line">make</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">make install</span><br><span class="line"><span class="comment"># 可以使用&amp;&amp; 符号连起来一起运行  make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure><h3 id="启动nginx"><a href="#启动nginx" class="headerlink" title="启动nginx"></a>启动nginx</h3><p>nginx 安装路径在 <code>/usr/local/nginx</code> ，配置文件在conf 文件夹上</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动nginx </span></span><br><span class="line">/usr/local/nginx/sbin/nginx </span><br></pre></td></tr></table></figure><p>nginx 常用命令说明</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>nginx -s stop</td><td>停止</td></tr><tr><td>nginx -s quit</td><td>退出</td></tr><tr><td>nginx -s reload</td><td>重新读取配置并启动</td></tr></tbody></table><h2 id="配置FastDFS-的Nginx-模块"><a href="#配置FastDFS-的Nginx-模块" class="headerlink" title="配置FastDFS 的Nginx 模块"></a>配置FastDFS 的Nginx 模块</h2><h3 id="解压-fastdfs-nginx-模块"><a href="#解压-fastdfs-nginx-模块" class="headerlink" title="解压 fastdfs-nginx 模块"></a>解压 fastdfs-nginx 模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf  fastdfs-nginx-module-1.22.tar.gz</span><br></pre></td></tr></table></figure><h3 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果启动了nginx ，先停止nginx </span></span><br><span class="line">/usr/local/nginx/sbin/nginx -s quit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入刚刚解压的nginx 目录</span></span><br><span class="line"><span class="built_in">cd</span> /opt/softwares/nginx-1.16.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加fastdfs-nginx模块到nginx </span></span><br><span class="line">./configure --add-module=../fastdfs-nginx-module-1.22/src</span><br><span class="line"><span class="comment"># 重新编译安装nginx</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="查看是否安装fastdfs-nginx"><a href="#查看是否安装fastdfs-nginx" class="headerlink" title="查看是否安装fastdfs-nginx"></a>查看是否安装fastdfs-nginx</h3><p>如果出现 configure arguments: –add-module&#x3D;..&#x2F;fastdfs-nginx-module-1.22&#x2F;src 说明配置成功了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -V</span><br></pre></td></tr></table></figure><h3 id="编辑mod-fastdfs-conf配置文件"><a href="#编辑mod-fastdfs-conf配置文件" class="headerlink" title="编辑mod_fastdfs.conf配置文件"></a>编辑mod_fastdfs.conf配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入/opt/softwares/fastdfs-nginx-module-1.22/src</span></span><br><span class="line"><span class="built_in">cd</span> /opt/softwares/fastdfs-nginx-module-1.22/src</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制  mod_fastdfs.conf 到 /etc/fdfs 目录上</span></span><br><span class="line"><span class="built_in">cp</span> mod_fastdfs.conf /etc/fdfs/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入fastdfs-6.06/conf 解压目录下</span></span><br><span class="line"><span class="built_in">cd</span> /opt/softwares/fastdfs-6.06/conf</span><br><span class="line"><span class="comment"># 复制  anti-steal.jpg http.conf mime.types 到 /etc/fdfs/上</span></span><br><span class="line"><span class="built_in">cp</span> anti-steal.jpg http.conf mime.types /etc/fdfs/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑 mod_fastdfs.conf </span></span><br><span class="line">vim /etc/fdfs/mod_fastdfs.conf</span><br></pre></td></tr></table></figure><p>mod_fastdfs.conf 修改内容</p><blockquote><p>#配置tracker_server 服务器地址<br>tracker_server&#x3D;192.168.3.12:22122<br>#需要和storage.conf 一致<br>store_path0&#x3D;&#x2F;data&#x2F;fastdfs&#x2F;storage&#x2F;store0<br>#如果地址中包含group 前缀需要设置为true<br>url_have_group_name&#x3D;true</p></blockquote><h3 id="编辑nginx-conf-配置文件"><a href="#编辑nginx-conf-配置文件" class="headerlink" title="编辑nginx.conf 配置文件"></a>编辑nginx.conf 配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/loca/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure><blockquote><p>#在server 下面新增<br>#如果只有一个group1 配置<br>location ~&#x2F;group1&#x2F;M00 {<br>    ngx_fastdfs_module;<br>}<br>#如果多个group可以使用正则,配置多个group 的时候用到<br>location ~&#x2F;group([0-9])&#x2F;M00 {<br>   ngx_fastdfs_module;<br>}</p></blockquote><h3 id="启动nginx-1"><a href="#启动nginx-1" class="headerlink" title="启动nginx"></a>启动nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx</span><br></pre></td></tr></table></figure><h2 id="查看服务是否启动"><a href="#查看服务是否启动" class="headerlink" title="查看服务是否启动"></a>查看服务是否启动</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看是否启动</span></span><br><span class="line">ps aux | grep fdfs </span><br><span class="line"><span class="comment"># 查看tracker端口是否正常</span></span><br><span class="line">netstat -tlnp | grep 22122 </span><br><span class="line"><span class="comment"># 查看storage 端口是否正常</span></span><br><span class="line">netstat -tlnp | grep 23000</span><br><span class="line"><span class="comment"># 查看nginx 端口是否正常</span></span><br><span class="line">netstat -tlnp | grep 80</span><br></pre></td></tr></table></figure><h2 id="上传使用方式"><a href="#上传使用方式" class="headerlink" title="上传使用方式"></a>上传使用方式</h2><p><a href="">JAVA 示例</a><br><a href="">C# 示例</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;应用场景&quot;&gt;&lt;a href=&quot;#应用场景&quot; class=&quot;headerlink&quot; title=&quot;应用场景&quot;&gt;&lt;/a&gt;应用场景&lt;/h2&gt;&lt;p&gt;当使用springcloud 微服务实现负载均衡时，遇到文件上传获取的难题，这时可以将文件放到FastDFS 服务上，只需要</summary>
      
    
    
    
    
    <category term="linux" scheme="https://luchangjiu.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>window 安装FreeSSHD 实现与linux 文件互传</title>
    <link href="https://luchangjiu.github.io/2020/06/25/windows/freesshd-install/"/>
    <id>https://luchangjiu.github.io/2020/06/25/windows/freesshd-install/</id>
    <published>2020-06-25T13:56:01.000Z</published>
    <updated>2022-04-17T08:23:56.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>在搭建 Windows Server 服务器时有时候需要在linux 系统上直接发送文件或者通过终端直接链接过来， 所以需要windows 系统支持ssh 。</p><h2 id="下载FreeSSHD"><a href="#下载FreeSSHD" class="headerlink" title="下载FreeSSHD"></a>下载FreeSSHD</h2><p>下载地址<code>http://www.freesshd.com/?ctt=download</code> 下载<a href="http://www.freesshd.com/freeSSHd.exe">freeSSHd.exe</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>双击运行<code>freeSSHd.exe</code> 然后一直next 直至完成就好了。</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>在桌面双击FreeSSHd快捷方式， 然后在右下角找到启动的FreeSSHd启动程序，并打开它。</p><h3 id="设置登陆用户"><a href="#设置登陆用户" class="headerlink" title="设置登陆用户"></a>设置登陆用户</h3><p>点击Users 的Tab 页如图：<br><img src="/images/archives/freesshd-install-img01.png" alt="alt freesshd01"><br>添加登陆用户<br><img src="/images/archives/freesshd-install-img02.png" alt="alt freesshd02"><br>这里我配置了两个可以登陆的用户，一个使用windows 授权方式登陆，一个是我自定义的root 账号<br><img src="/images/archives/freesshd-install-img03.png" alt="alt freesshd03"><br><img src="/images/archives/freesshd-install-img04.png" alt="alt freesshd03"></p><h3 id="配置日志监听"><a href="#配置日志监听" class="headerlink" title="配置日志监听"></a>配置日志监听</h3><p>点击Logging 的Tab页如图:<br>配置日志输入<br><img src="/images/archives/freesshd-install-img05.png" alt="alt freesshd03"><br>设置好点击应用即可</p><h3 id="配置登陆授权方式"><a href="#配置登陆授权方式" class="headerlink" title="配置登陆授权方式"></a>配置登陆授权方式</h3><p>点击 Authentication 的Tab页如图：<br><img src="/images/archives/freesshd-install-img06.png" alt="alt freesshd03"><br>设置好点击应用即可</p><h3 id="配置SSH-信息"><a href="#配置SSH-信息" class="headerlink" title="配置SSH 信息"></a>配置SSH 信息</h3><p>点击SSH的Tab 页如图：<br><img src="/images/archives/freesshd-install-img07.png" alt="alt freesshd03"><br>设置好点击应用即可<br>根据设置的端口去防火墙入站规则设置开启， 我这里用的是默认22 端口。</p><h3 id="配置SFTP-上传文件路径"><a href="#配置SFTP-上传文件路径" class="headerlink" title="配置SFTP 上传文件路径"></a>配置SFTP 上传文件路径</h3><p>点击SFTP的Tab 页如图：<br><img src="/images/archives/freesshd-install-img08.png" alt="alt freesshd03"></p><h2 id="开启服务"><a href="#开启服务" class="headerlink" title="开启服务"></a>开启服务</h2><p>打开cmd 命令行输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重新启动 FreeSSHDService服务</span></span><br><span class="line">net stop FreeSSHDService</span><br><span class="line">net start FreeSSHDService</span><br></pre></td></tr></table></figure><p>或者打开services.msc找到windows服务FreeSSHDService点击重新启动就好如图：<br><img src="/images/archives/freesshd-install-img10.png" alt="alt freesshd03"></p><h2 id="测试是否链接成功"><a href="#测试是否链接成功" class="headerlink" title="测试是否链接成功"></a>测试是否链接成功</h2><p>使用putty 的ssh 方式链接或者在 linux 系统上直接使用ssh 链接和发送文件测试就好。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;应用场景&quot;&gt;&lt;a href=&quot;#应用场景&quot; class=&quot;headerlink&quot; title=&quot;应用场景&quot;&gt;&lt;/a&gt;应用场景&lt;/h2&gt;&lt;p&gt;在搭建 Windows Server 服务器时有时候需要在linux 系统上直接发送文件或者通过终端直接链接过来， 所以需要</summary>
      
    
    
    
    
    <category term="windows" scheme="https://luchangjiu.github.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>使用Putty 链接 linux 系统</title>
    <link href="https://luchangjiu.github.io/2020/06/22/windows/use-putty/"/>
    <id>https://luchangjiu.github.io/2020/06/22/windows/use-putty/</id>
    <published>2020-06-22T14:47:05.000Z</published>
    <updated>2022-04-13T15:22:53.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>使用putty 轻量级ssh 软件链接 linux shell 终端和互传文件。</p><h2 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h2><p><a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html">下载 putty 软件 </a><br>按照自己电脑的操作系统下载 ，可以下载  <code>putty-64bit-0.73-installer.msi</code> 安装使用，也可以直接下载<code>putty.zip</code> 解压直接使用， 由于本人不想安装直接下载<code>putty.zip</code> 文件。 下载后解压即可。<br>解压后如图：<br><img src="/images/archives/putty-list.png" alt="alt puttylist"></p><h2 id="使用PUTTY-EXE链接终端"><a href="#使用PUTTY-EXE链接终端" class="headerlink" title="使用PUTTY.EXE链接终端"></a>使用PUTTY.EXE链接终端</h2><p>双击打开PUTTY.EXE录入ip 地址和端口然后点击open 打开终端输入用户名和密码即可<br>如图：<br><img src="/images/archives/putty-exe.png" alt="alt putty-exe"></p><h2 id="使用PSCP-EXE传输文件"><a href="#使用PSCP-EXE传输文件" class="headerlink" title="使用PSCP.EXE传输文件"></a>使用PSCP.EXE传输文件</h2><p>打开cmd 命令， cd 定位到PSCP.EXE的文件夹上</p><p><strong>上传命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scp 当前windows 文件  linux用户名@IP地址:/上传目录</span></span><br><span class="line"><span class="comment"># 示例 将 test.txt 上传到linux /opt 文件夹上</span></span><br><span class="line">scp D:\\test.txt root@192.168.3.12:/opt</span><br></pre></td></tr></table></figure><p><strong>下载命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scp  linux用户名@IP地址:/文件地址 windows 下载目录</span></span><br><span class="line"><span class="comment"># 示例 将 linux 上的test.txt下载到当前D盘</span></span><br><span class="line">scp root@192.168.3.12:/opt/test.txt D:\\</span><br></pre></td></tr></table></figure><p>&#x2F;&#x2F;todo 其余参数解释和使用待补充</p><h2 id="使用PSFTP-EXE传输文件"><a href="#使用PSFTP-EXE传输文件" class="headerlink" title="使用PSFTP.EXE传输文件"></a>使用PSFTP.EXE传输文件</h2><p>双击打开PSFTP.EXE 文件<br><strong>输入命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># open ip 地址 回车 然后输入用户名和密码登陆</span></span><br><span class="line">open 192.168.3.12</span><br><span class="line"><span class="comment"># cd /opt 切换到指定的操作目录</span></span><br><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line"><span class="comment"># lcd d:\\ 切换本地windows操作的目录</span></span><br><span class="line">lcd D:\\</span><br><span class="line"><span class="comment"># put 上传文件名</span></span><br><span class="line">put test.txt</span><br><span class="line"><span class="comment"># get 下载文件名</span></span><br><span class="line">get test2.txt</span><br></pre></td></tr></table></figure><p>&#x2F;&#x2F;todo 其余参数解释和使用待补充</p><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><ol><li>为方便配置环境变量打开<code>控制面板\系统和安全\系统</code>打开高级系统设置点击环境变量</li><li>点击新建环境变量</li><li>变量名<code>PUTTY_HOME</code>, 变量值是putty 文件的目录比如我的：<code>S:\softwares\common\putty</code></li><li>在path系统变量后面追加 <code>;%PUTTY_HOME%</code></li><li>重新打开cmd 就可以在任意目录访问scp， putty，psftp 等命令了。 方便文件直接上传下载</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h2&gt;&lt;p&gt;使用putty 轻量级ssh 软件链接 linux shell 终端和互传文件。&lt;/p&gt;
&lt;h2 id=&quot;下载文件&quot;&gt;&lt;a href=&quot;#下</summary>
      
    
    
    
    
    <category term="windows" scheme="https://luchangjiu.github.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>springmvc整合百度ueditor富文本编辑器</title>
    <link href="https://luchangjiu.github.io/2020/06/18/java/springmvc-merge-ueditor/"/>
    <id>https://luchangjiu.github.io/2020/06/18/java/springmvc-merge-ueditor/</id>
    <published>2020-06-18T12:27:17.000Z</published>
    <updated>2022-04-25T16:04:20.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>springmvc 页面整合百度ueditor 富文本编辑器， 使用spring自带的上传组件，替换掉ueditor 自带的jsp 上传组件， 下载<a href="http://ueditor.baidu.com/website/download.html">ueditor</a>， 下载jsp 版本utf-8 格式的好了</p><h2 id="步骤一-搭建项目"><a href="#步骤一-搭建项目" class="headerlink" title="步骤一 搭建项目"></a>步骤一 搭建项目</h2><p>这里我为了方便使用了springboot 项目，在<code>resource/static/</code>文件夹下创建文件夹ueditor，<br>然后解压下载好的ueditor1_4_3_3-utf8-jsp.zip文件， 将文件内容复制到ueditor 目录下，<br>如图：<br><img src="/images/archives/springmvc-merge-ueditor-img01.png" alt="alt 文件"></p><h2 id="步骤二-编辑上传配置以及代码"><a href="#步骤二-编辑上传配置以及代码" class="headerlink" title="步骤二 编辑上传配置以及代码"></a>步骤二 编辑上传配置以及代码</h2><p>修改配置文件 ueditor.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 编辑器资源文件根路径。它所表示的含义是：以编辑器实例化页面为当前路径，指向编辑器资源文件（即dialog等文件夹）的路径。</span></span><br><span class="line"><span class="comment">     * 鉴于很多同学在使用编辑器的时候出现的种种路径问题，此处强烈建议大家使用&quot;相对于网站根目录的相对路径&quot;进行配置。</span></span><br><span class="line"><span class="comment">     * &quot;相对于网站根目录的相对路径&quot;也就是以斜杠开头的形如&quot;/myProject/ueditor/&quot;这样的路径。</span></span><br><span class="line"><span class="comment">     * 如果站点中有多个不在同一层级的页面需要实例化编辑器，且引用了同一UEditor的时候，此处的URL可能不适用于每个页面的编辑器。</span></span><br><span class="line"><span class="comment">     * 因此，UEditor提供了针对不同页面的编辑器可单独配置的根路径，具体来说，在需要实例化编辑器的页面最顶部写上如下代码即可。当然，需要令此处的URL等于对应的配置。</span></span><br><span class="line"><span class="comment">     * window.UEDITOR_HOME_URL = &quot;/xxxx/xxxx/&quot;;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">var</span> <span class="variable constant_">URL</span> = <span class="variable language_">window</span>.<span class="property">UEDITOR_HOME_URL</span> || <span class="title function_">getUEBasePath</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 配置项主体。注意，此处所有涉及到路径的配置别遗漏URL变量。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">UEDITOR_CONFIG</span> = &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//为编辑器实例添加一个路径，这个不能被注释</span></span><br><span class="line">        <span class="attr">UEDITOR_HOME_URL</span>: <span class="variable constant_">URL</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 服务器统一请求接口路径</span></span><br><span class="line">        <span class="comment">// , serverUrl: URL + &quot;jsp/controller.jsp&quot;  将这里改成下面的代码</span></span><br><span class="line">        , <span class="attr">serverUrl</span>: <span class="variable constant_">URL</span> + <span class="string">&quot;/ueditor&quot;</span></span><br><span class="line"><span class="comment">// ...... 省略下面的代码 </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>新建<code>UEditorController.java</code>类 用户替换 ueditor自带的jsp 类上传组件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/ueditor&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UEditorController</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Value(&quot;$&#123;ueditor.imagepath&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String imageUploadPath;</span><br><span class="line"><span class="meta">@Value(&quot;$&#123;ueditor.videopath&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String videoUploadPath;</span><br><span class="line"><span class="meta">@Value(&quot;$&#123;ueditor.filepath&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String fileUploadPath;</span><br><span class="line"><span class="meta">@Value(&quot;$&#123;spring.profiles.active&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; active;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">index</span><span class="params">(String action, HttpServletRequest request, Integer start, Integer size)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">null</span> == action)</span><br><span class="line"><span class="keyword">return</span> config();</span><br><span class="line"><span class="type">MultipartHttpServletRequest</span> <span class="variable">multipartHttpServletRequest</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">MultipartFile upfile;</span><br><span class="line"><span class="keyword">if</span> (request <span class="keyword">instanceof</span> MultipartHttpServletRequest) &#123;</span><br><span class="line">multipartHttpServletRequest = (MultipartHttpServletRequest) request;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">switch</span> (action) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;config&quot;</span>: <span class="comment">// 配置获取</span></span><br><span class="line"><span class="keyword">return</span> config();</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;uploadimage&quot;</span>: <span class="comment">// 图片上传</span></span><br><span class="line">upfile = multipartHttpServletRequest.getFile(<span class="string">&quot;upfile&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>.upfile(upfile, <span class="string">&quot;image&quot;</span>, <span class="built_in">this</span>.imageUploadPath);</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;uploadvideo&quot;</span>: <span class="comment">// 视频上传</span></span><br><span class="line">upfile = multipartHttpServletRequest.getFile(<span class="string">&quot;upfile&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>.upfile(upfile, <span class="string">&quot;video&quot;</span>, <span class="built_in">this</span>.videoUploadPath);</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;uploadfile&quot;</span>: <span class="comment">// 附件上传</span></span><br><span class="line">upfile = multipartHttpServletRequest.getFile(<span class="string">&quot;upfile&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>.upfile(upfile, <span class="string">&quot;file&quot;</span>, <span class="built_in">this</span>.fileUploadPath);</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;uploadscrawl&quot;</span>: <span class="comment">// 涂鸦上传</span></span><br><span class="line"><span class="keyword">return</span> uploadscrawl(request.getParameter(<span class="string">&quot;upfile&quot;</span>));</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;listimage&quot;</span>: <span class="comment">// 在线图片获取</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>.resources(<span class="built_in">this</span>.imageUploadPath, start, size);</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;listfile&quot;</span>: <span class="comment">// 在线文件获取</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>.resources(<span class="built_in">this</span>.fileUploadPath, start, size);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 显示图片</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ymd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> imgname</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/image/&#123;ymd&#125;/&#123;imgname&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">image</span><span class="params">(<span class="meta">@PathVariable(&quot;ymd&quot;)</span> String ymd, <span class="meta">@PathVariable(&quot;imgname&quot;)</span> String imgname,</span></span><br><span class="line"><span class="params">HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="built_in">this</span>.responsefile(<span class="built_in">this</span>.imageUploadPath, ymd, imgname, response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 显示 视频</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ymd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> videoname</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/video/&#123;ymd&#125;/&#123;videoname&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">video</span><span class="params">(<span class="meta">@PathVariable(&quot;ymd&quot;)</span> String ymd, <span class="meta">@PathVariable(&quot;videoname&quot;)</span> String videoname,</span></span><br><span class="line"><span class="params">HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="built_in">this</span>.responsefile(<span class="built_in">this</span>.videoUploadPath, ymd, videoname, response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件响应</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ymd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filename</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/file/&#123;ymd&#125;/&#123;filename&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">file</span><span class="params">(<span class="meta">@PathVariable(&quot;ymd&quot;)</span> String ymd, <span class="meta">@PathVariable(&quot;filename&quot;)</span> String filename,</span></span><br><span class="line"><span class="params">HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="built_in">this</span>.responsefile(<span class="built_in">this</span>.fileUploadPath, ymd, filename, response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件响应</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filetype</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ymd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filenamne</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">responsefile</span><span class="params">(String uploadPathPrefix, String ymd, String filenamne, HttpServletResponse response)</span></span><br><span class="line"><span class="keyword">throws</span> IOException &#123;</span><br><span class="line">response.setContentType(<span class="string">&quot;application/octet-stream;charset=utf-8&quot;</span>);</span><br><span class="line">response.setHeader(<span class="string">&quot;content-disposition&quot;</span>,</span><br><span class="line"><span class="string">&quot;attachment;filename=&quot;</span> + java.net.URLEncoder.encode(filenamne, <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line"><span class="type">String</span> <span class="variable">fullPath</span> <span class="operator">=</span> uploadPathPrefix + File.separator + ymd + File.separator + filenamne;</span><br><span class="line">;</span><br><span class="line"><span class="type">File</span> <span class="variable">downFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fullPath);</span><br><span class="line"><span class="keyword">try</span> (<span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream()) &#123;</span><br><span class="line"><span class="keyword">try</span> (<span class="type">BufferedInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(downFile))) &#123;</span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"><span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">4096</span>];</span><br><span class="line"><span class="keyword">while</span> ((len = in.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">os.write(buf, <span class="number">0</span>, len);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 在线资源浏览 分页获取</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resourcepath</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> start</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> size</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Map&lt;String, Object&gt; <span class="title function_">resources</span><span class="params">(String resourcepath, Integer start, Integer size)</span> &#123;</span><br><span class="line">Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">map.put(<span class="string">&quot;state&quot;</span>, <span class="string">&quot;SUCCESS&quot;</span>);<span class="comment">// UEDI</span></span><br><span class="line">map.put(<span class="string">&quot;start&quot;</span>, start + <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(resourcepath);</span><br><span class="line">File[] folders = file.listFiles();</span><br><span class="line">List&lt;File&gt; folderlist = Arrays.asList(folders);</span><br><span class="line">folderlist.sort((f1, f2) -&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> f2.getName().compareTo(f1.getName());</span><br><span class="line">&#125;);</span><br><span class="line">List&lt;String&gt; listurl = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;(<span class="number">0</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> folders.length;</span><br><span class="line"><span class="keyword">if</span> (end &gt; <span class="number">20</span>)</span><br><span class="line">end = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; end; i++) &#123;</span><br><span class="line"><span class="type">File</span> <span class="variable">folder</span> <span class="operator">=</span> folders[i];</span><br><span class="line">File[] files = folder.listFiles();</span><br><span class="line"><span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">abspath</span> <span class="operator">=</span> f.getAbsolutePath();</span><br><span class="line">String[] fs = abspath.split(<span class="string">&quot;\\\\&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">ymdpath</span> <span class="operator">=</span> <span class="string">&quot;/&quot;</span> + fs[fs.length - <span class="number">4</span>] + <span class="string">&quot;/&quot;</span> + fs[fs.length - <span class="number">3</span>] + <span class="string">&quot;/&quot;</span> + fs[fs.length - <span class="number">2</span>] + <span class="string">&quot;/&quot;</span></span><br><span class="line">+ fs[fs.length - <span class="number">1</span>];</span><br><span class="line">listurl.add(ymdpath);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">map.put(<span class="string">&quot;total&quot;</span>, listurl.size() + <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> start + size;</span><br><span class="line"><span class="keyword">if</span> (len &gt;= listurl.size())</span><br><span class="line">len = listurl.size();</span><br><span class="line">listurl = listurl.subList(start, len);</span><br><span class="line">List&lt;Map&lt;String, String&gt;&gt; listmap = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Map&lt;String, String&gt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; listurl.size(); i++) &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> listurl.get(i);</span><br><span class="line">Map&lt;String, String&gt; urlmap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line">urlmap.put(<span class="string">&quot;url&quot;</span>, url);</span><br><span class="line">listmap.add(urlmap);</span><br><span class="line">&#125;</span><br><span class="line">map.put(<span class="string">&quot;list&quot;</span>, listmap);</span><br><span class="line"><span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取配置</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String <span class="title function_">config</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="comment">// 这里根据配置文件来判断 如果似乎部署jar 包的方式需要用到 classLoader 来加载配置文件</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">null</span> != active &amp;&amp; active.contains(<span class="string">&quot;prod&quot;</span>)) &#123;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader().getResourceAsStream(<span class="string">&quot;static/ueditor/jsp/config.json&quot;</span>);</span><br><span class="line">reader = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(is));</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">reader = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileReader</span>(ResourceUtils.getFile(<span class="string">&quot;classpath:static/ueditor/jsp/config.json&quot;</span>)));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>; (line = reader.readLine()) != <span class="literal">null</span>;) &#123;</span><br><span class="line">builder.append(line);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> builder.toString();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 上传涂鸦图片</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> base64img</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Map&lt;String, String&gt; <span class="title function_">uploadscrawl</span><span class="params">(String base64img)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">suffix</span> <span class="operator">=</span> <span class="string">&quot;.jpg&quot;</span>; <span class="comment">// 默认jpg 文件</span></span><br><span class="line"><span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMddHHmmssSSS&quot;</span>).format(<span class="keyword">new</span> <span class="title class_">Date</span>()) + suffix;</span><br><span class="line"><span class="type">String</span> <span class="variable">fullPath</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">ymd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMdd&quot;</span>).format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"><span class="type">File</span> <span class="variable">floder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="built_in">this</span>.imageUploadPath + File.separator + ymd);</span><br><span class="line"><span class="keyword">if</span> (!floder.exists())</span><br><span class="line">floder.mkdirs();</span><br><span class="line">fullPath = floder.getPath() + File.separator + fileName;</span><br><span class="line"><span class="type">byte</span>[] bs = Base64Utils.decodeFromString(base64img);</span><br><span class="line"><span class="keyword">try</span> (<span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(fullPath))) &#123;</span><br><span class="line">os.write(bs);</span><br><span class="line">os.flush();</span><br><span class="line">os.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ueResult(<span class="string">&quot;SUCCESS&quot;</span>, String.format(<span class="string">&quot;/ueditor/image/%s/%s&quot;</span>, ymd, fileName), <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 上传文件</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> upfile   文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filetype 文件类型 image | video | file</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalStateException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Map&lt;String, String&gt; <span class="title function_">upfile</span><span class="params">(MultipartFile upfile, String filetype, String uploadPathPrefix)</span></span><br><span class="line"><span class="keyword">throws</span> IllegalStateException, IOException &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">suffix</span> <span class="operator">=</span> upfile.getOriginalFilename().substring(upfile.getOriginalFilename().lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"><span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMddHHmmssSSS&quot;</span>).format(<span class="keyword">new</span> <span class="title class_">Date</span>()) + suffix;</span><br><span class="line"><span class="type">String</span> <span class="variable">fullPath</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">ymd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMdd&quot;</span>).format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"><span class="type">File</span> <span class="variable">floder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(uploadPathPrefix + File.separator + ymd);</span><br><span class="line"><span class="keyword">if</span> (!floder.exists())</span><br><span class="line">floder.mkdirs();</span><br><span class="line">fullPath = floder.getPath() + File.separator + fileName;</span><br><span class="line">upfile.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(fullPath));</span><br><span class="line"><span class="type">String</span> <span class="variable">vmpath</span> <span class="operator">=</span> String.format(<span class="string">&quot;/ueditor/%s/%s/%s&quot;</span>, filetype, ymd, fileName);</span><br><span class="line"><span class="keyword">return</span> ueResult(<span class="string">&quot;SUCCESS&quot;</span>, vmpath, upfile.getName(), upfile.getOriginalFilename());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回 ueditor 参数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> state</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> title</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> original</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Map&lt;String, String&gt; <span class="title function_">ueResult</span><span class="params">(String state, String url, String title, String original)</span> &#123;</span><br><span class="line">Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line">map.put(<span class="string">&quot;state&quot;</span>, state);<span class="comment">// UEDITOR的规则:不为SUCCESS则显示state的内容</span></span><br><span class="line">map.put(<span class="string">&quot;url&quot;</span>, url); <span class="comment">// 能访问到你现在图片的路径</span></span><br><span class="line">map.put(<span class="string">&quot;title&quot;</span>, title);</span><br><span class="line">map.put(<span class="string">&quot;original&quot;</span>, original);</span><br><span class="line"><span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在application.yml 文件 新增文件保存路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 7001</span><br><span class="line"></span><br><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    active: dev # 配置启动方式   dev | prod </span><br><span class="line"></span><br><span class="line"># 配置ueditor 下载的位置</span><br><span class="line">ueditor:</span><br><span class="line">  imagepath: D:\\ueditor\\image\\</span><br><span class="line">  videopath: D:\\ueditor\\video\\</span><br><span class="line">  filepath: D:\\ueditor\\file\\</span><br></pre></td></tr></table></figure><h2 id="步骤三-测试"><a href="#步骤三-测试" class="headerlink" title="步骤三 测试"></a>步骤三 测试</h2><p>测试页面代码 </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>富文本编辑器<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/plain&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/ueditor/ueditor.config.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/ueditor/ueditor.all.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> ue = <span class="variable constant_">UE</span>.<span class="title function_">getEditor</span>(<span class="string">&#x27;container&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>启动springboot 项目打开页面测试即可</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;springmvc 页面整合百度ueditor 富文本编辑器， 使用spring自带的上传组件，替换掉ueditor 自带的jsp 上传组件</summary>
      
    
    
    
    
    <category term="java" scheme="https://luchangjiu.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>怎样创建hexo 的博客</title>
    <link href="https://luchangjiu.github.io/2020/05/30/hexo/create-hexo-file/"/>
    <id>https://luchangjiu.github.io/2020/05/30/hexo/create-hexo-file/</id>
    <published>2020-05-30T14:16:58.000Z</published>
    <updated>2022-04-13T15:22:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="步骤一"><a href="#步骤一" class="headerlink" title="步骤一"></a>步骤一</h1><p>打开命令行（我这里用的是windows 系统 用cmd 命令行） </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;这里输入一个文件的名称（一般用英文）&quot;</span></span><br></pre></td></tr></table></figure><h1 id="步骤二"><a href="#步骤二" class="headerlink" title="步骤二"></a>步骤二</h1><p>在部署目录 <code>hexo/source/_posts/</code> 文件夹下找到刚刚的文件以<code>.md</code> 结尾，然后对它进行编辑(需要熟悉markdown 语法)</p><h1 id="步骤三"><a href="#步骤三" class="headerlink" title="步骤三"></a>步骤三</h1><p>编辑完成后 输入命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean    <span class="comment">##清空缓存信息</span></span><br><span class="line">$ hexo generate <span class="comment">## 根据.md 格式的文件生成hexo 需要的html 静态网页</span></span><br><span class="line">$ hexo deploy   <span class="comment">## 发布到GitHub上</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;步骤一&quot;&gt;&lt;a href=&quot;#步骤一&quot; class=&quot;headerlink&quot; title=&quot;步骤一&quot;&gt;&lt;/a&gt;步骤一&lt;/h1&gt;&lt;p&gt;打开命令行（我这里用的是windows 系统 用cmd 命令行） &lt;/p&gt;
&lt;figure class=&quot;highlight bas</summary>
      
    
    
    
    
    <category term="Hexo" scheme="https://luchangjiu.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>hexo 博客部署到gitee 上</title>
    <link href="https://luchangjiu.github.io/2020/05/30/hexo/hexo-deploy-to-gitee/"/>
    <id>https://luchangjiu.github.io/2020/05/30/hexo/hexo-deploy-to-gitee/</id>
    <published>2020-05-30T14:16:58.000Z</published>
    <updated>2022-04-13T15:22:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>以下操作在ubuntu 系统上完成。</p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul><li>gitee 帐号信息</li><li>ssh</li><li>git</li><li>hexo</li></ul><h2 id="配置git-的用户信息"><a href="#配置git-的用户信息" class="headerlink" title="配置git 的用户信息"></a>配置git 的用户信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;gitee 用户名&quot;</span></span><br><span class="line">git config --global user.mail <span class="string">&quot;你的邮箱&quot;</span></span><br></pre></td></tr></table></figure><h2 id="生成ssh密钥"><a href="#生成ssh密钥" class="headerlink" title="生成ssh密钥"></a>生成ssh密钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;邮箱地址&quot;</span></span><br><span class="line"><span class="comment"># 连续按三下回车 后 密钥信息将会生成在你的主目录下的.ssh 文件夹上面</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入.ssh 目录下面</span></span><br><span class="line"><span class="built_in">cd</span> /home/你的帐号名/.ssh</span><br><span class="line"><span class="comment"># 查看密钥信息</span></span><br><span class="line"><span class="built_in">cat</span> id_rsa.pub</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加密钥信息到ssh 上</span></span><br><span class="line">ssh-add id_rsa</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="将生成的密钥信息配置到gitee-上"><a href="#将生成的密钥信息配置到gitee-上" class="headerlink" title="将生成的密钥信息配置到gitee 上"></a>将生成的密钥信息配置到gitee 上</h2><ol><li>登陆<a href="https://gitee.com/">码云</a></li><li>进入个人设置</li><li>找到安全设置–&gt; SSH公钥</li><li>填写标题,然后将刚才 cat id_rsa.pub 这个文件里面的内容复制到 公钥输入框上</li><li>点击提交即可</li></ol><h2 id="测试是否链接成功"><a href="#测试是否链接成功" class="headerlink" title="测试是否链接成功"></a>测试是否链接成功</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行命令</span></span><br><span class="line">:ssh -T  git@gitee.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回以下结果表示成功</span></span><br><span class="line"></span><br><span class="line">Hi 用户名! You<span class="string">&#x27;ve successfully authenticated, but GITEE.COM does not provide shell access.</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><h2 id="进入到hexo-文件夹上"><a href="#进入到hexo-文件夹上" class="headerlink" title="进入到hexo 文件夹上"></a>进入到hexo 文件夹上</h2><ol><li>打开_config.yml 文件</li></ol><p><strong>在底下找到deploy 节点 并修改你的git地址<br>修改时注意保证你的仓库是空的，否则hexo 上传文件时会将你原有的文件清空</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: git@gitee.com:你的用户名/仓库名.git</span><br><span class="line">  branch: master</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><p>安装hexo git </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li><li><p>上传到gitee 仓库上</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">hexo clean <span class="comment"># 清除缓存</span></span><br><span class="line">hexo g <span class="comment"># 生成</span></span><br><span class="line">hexo d <span class="comment"># 部署</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="部署成功后进入gitee-仓库"><a href="#部署成功后进入gitee-仓库" class="headerlink" title="部署成功后进入gitee 仓库"></a>部署成功后进入gitee 仓库</h2><ol><li>点击服务 –&gt; Gitee Pages</li><li>进入该页面后需要手动点击更新按钮才会部署到静态页面上</li><li>点击更新按钮后等待几分钟就可以访问了</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;以下操作在ubuntu 系统上完成。&lt;/p&gt;
&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink</summary>
      
    
    
    
    
    <category term="Hexo" scheme="https://luchangjiu.github.io/tags/Hexo/"/>
    
  </entry>
  
</feed>
